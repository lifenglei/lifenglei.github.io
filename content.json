{"meta":{"title":"å‰ç«¯å¼€å‘æ²‰æ·€","subtitle":null,"description":null,"author":"ç«¯ç«¯","url":"https://github.com/lifenglei"},"pages":[],"posts":[{"title":"tsç« ä¹‹åŸºç¡€ç±»å‹","slug":"tsç« ä¹‹åŸºç¡€ç±»å‹","date":"2019-06-20T03:54:41.000Z","updated":"2019-06-20T03:56:15.388Z","comments":true,"path":"2019/06/20/tsç« ä¹‹åŸºç¡€ç±»å‹/","link":"","permalink":"https://github.com/lifenglei/2019/06/20/tsç« ä¹‹åŸºç¡€ç±»å‹/","excerpt":"","text":"åŸºç¡€ç±»å‹ä»‹ç»ä¸ºäº†è®©ç¨‹åºæœ‰ä»·å€¼ï¼Œæˆ‘ä»¬éœ€è¦èƒ½å¤Ÿå¤„ç†æœ€ç®€å•çš„æ•°æ®å•å…ƒï¼šæ•°å­—ï¼Œå­—ç¬¦ä¸²ï¼Œç»“æ„ä½“ï¼Œå¸ƒå°”å€¼ç­‰ã€‚ TypeScriptæ”¯æŒä¸JavaScriptå‡ ä¹ç›¸åŒçš„æ•°æ®ç±»å‹ï¼Œæ­¤å¤–è¿˜æä¾›äº†å®ç”¨çš„æšä¸¾ç±»å‹æ–¹ä¾¿æˆ‘ä»¬ä½¿ç”¨ã€‚å¸ƒå°”å€¼let isDuan: boolean = false æ•°å­—å’Œjavascriptä¸€æ ·ï¼Œtsé‡Œçš„æ‰€æœ‰æ•°å­—éƒ½æ˜¯æµ®ç‚¹æ•°ï¼Œè¿™äº›æµ®ç‚¹æ•°çš„ç±»å‹æ˜¯numberã€‚é™¤äº†æ”¯æŒåè¿›åˆ¶å’Œåå…­è¿›åˆ¶å­—é¢é‡ï¼Œtsè¿˜æ”¯æŒes5ä¸­å¼•å…¥çš„äºŒè¿›åˆ¶å’Œå…«è¿›åˆ¶å­—é¢é‡ã€‚let decLiteral: number = 6; let hexLiteral: number = 0xf00d; let binaryLiteral: number = 0b1010; let octalLiteral: number = 0o744; å­—ç¬¦ä¸²æ™®é€šå­—ç¬¦ä¸²let name:string = &quot;duanduan&quot; name = &quot;lei&quot; æ¨¡æ¿å­—ç¬¦ä¸²let name: string = &quot;duanduan&quot; let age: number = 29; let sentence: string = `Hello,my name is ${name}.I will be ${age+1} years old next month` æ•°ç»„ å¯ä»¥åœ¨å…ƒç´ ç±»å‹åé¢æ¥ä¸Š[],è¡¨ç¤ºç”±æ­¤ç±»å‹å…ƒç´ ç»„æˆçš„Uä¸€ä¸ªæ•°ç»„let list: number[] = [1,2,3]; æ•°ç»„æ³›å‹ï¼ŒArray&lt;å…ƒç´ ç±»å‹&gt; let list: Array&lt;number&gt; = [1,2,3] å…ƒç¥–ç±»å‹ Tupleå…ƒç»„ç±»å‹å…è®¸è¡¨ç¤ºä¸€ä¸ªå·²çŸ¥å…ƒç´ æ•°é‡å’Œç±»å‹çš„æ•°ç»„ï¼Œå„å…ƒç´ çš„ç±»å‹ä¸å¿…ç›¸åŒã€‚ æ¯”å¦‚ï¼Œä½ å¯ä»¥å®šä¹‰ä¸€å¯¹å€¼åˆ†åˆ«ä¸º stringå’Œnumberç±»å‹çš„å…ƒç»„ã€‚//declare a tuple typelet x: [string,number];//Initialize itx = [â€˜duanduanâ€™,29] // ok//Initialize it incorrectlyx = [10,â€™duanduanâ€™] // Error å½“è®¿é—®ä¸€ä¸ªå·²çŸ¥ç´¢å¼•çš„å…ƒç´  ä¼šå¾—åˆ°æ­£ç¡®çš„ç±»å‹console.log(x[0].substr(1)) //okconsole.log(x[1].substr(1))// â€˜numberâ€™ does not have â€˜substrâ€™å½“è®¿é—®ä¸€ä¸ªè¶Šç•Œçš„å…ƒç´  ä¼šä½¿ç”¨è”åˆç±»å‹æ›¿ä»£ x[3] = â€˜worldâ€™; // OK, å­—ç¬¦ä¸²å¯ä»¥èµ‹å€¼ç»™(string | number)ç±»å‹ console.log(x[5].toString()); // OK, â€˜stringâ€™ å’Œ â€˜numberâ€™ éƒ½æœ‰ toString x[6] = true; // Error, å¸ƒå°”ä¸æ˜¯(string | number)ç±»å‹ è”åˆç±»å‹æ˜¯é«˜çº§ä¸»é¢˜ï¼Œæˆ‘ä»¬ä¼šåœ¨ä»¥åçš„ç« èŠ‚é‡Œè®¨è®ºå®ƒã€‚æšä¸¾enumç±»å‹æ˜¯å¯¹JavaScriptæ ‡å‡†æ•°æ®ç±»å‹çš„ä¸€ä¸ªè¡¥å……ã€‚enum Info {name=â€™duanduanâ€™,website=â€™blogâ€™,age=29}let n: Info = Info.name æšä¸¾ç±»å‹æä¾›çš„ä¸€ä¸ªä¾¿åˆ©æ˜¯ä½ å¯ä»¥ç”±æšä¸¾çš„å€¼å¾—åˆ°å®ƒçš„åå­—ã€‚ ä¾‹å¦‚ï¼Œæˆ‘ä»¬çŸ¥é“æ•°å€¼ä¸º2ï¼Œä½†æ˜¯ä¸ç¡®å®šå®ƒæ˜ å°„åˆ°Coloré‡Œçš„å“ªä¸ªåå­—ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥æ‰¾ç›¸åº”çš„åå­—ï¼šenum Color {Red = 1, Green, Blue}let colorName: string = Color[2]; console.log(colorName); // æ˜¾ç¤ºâ€™Greenâ€™å› ä¸ºä¸Šé¢ä»£ç é‡Œå®ƒçš„å€¼æ˜¯2 Anyæœ‰æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šæƒ³è¦ä¸ºé‚£äº›åœ¨ç¼–ç¨‹é˜¶æ®µè¿˜ä¸æ¸…æ¥šç±»å‹çš„å˜é‡æŒ‡å®šä¸€ä¸ªç±»å‹ã€‚ è¿™äº›å€¼å¯èƒ½æ¥è‡ªäºåŠ¨æ€çš„å†…å®¹ï¼Œæ¯”å¦‚æ¥è‡ªç”¨æˆ·è¾“å…¥æˆ–ç¬¬ä¸‰æ–¹ä»£ç åº“ã€‚ è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›ç±»å‹æ£€æŸ¥å™¨å¯¹è¿™äº›å€¼è¿›è¡Œæ£€æŸ¥è€Œæ˜¯ç›´æ¥è®©å®ƒä»¬é€šè¿‡ç¼–è¯‘é˜¶æ®µçš„æ£€æŸ¥ã€‚ é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ anyç±»å‹æ¥æ ‡è®°è¿™äº›å˜é‡ï¼šlet notSure: any = 4;notSure = â€œmaybe a string insteadâ€;notSure = false; // okay, definitely a boolean å½“ä½ åªçŸ¥é“ä¸€éƒ¨åˆ†æ•°æ®çš„ç±»å‹æ—¶ï¼Œanyç±»å‹ä¹Ÿæ˜¯æœ‰ç”¨çš„ã€‚ æ¯”å¦‚ï¼Œä½ æœ‰ä¸€ä¸ªæ•°ç»„ï¼Œå®ƒåŒ…å«äº†ä¸åŒçš„ç±»å‹çš„æ•°æ®ï¼šlet list: any[] = [1, true, â€œfreeâ€];list[1] = 100; VoidæŸç§ç¨‹åº¦ä¸Šæ¥è¯´ï¼Œvoidç±»å‹åƒæ˜¯ä¸anyç±»å‹ç›¸åï¼Œå®ƒè¡¨ç¤ºæ²¡æœ‰ä»»ä½•ç±»å‹ã€‚ å½“ä¸€ä¸ªå‡½æ•°æ²¡æœ‰è¿”å›å€¼æ—¶ï¼Œä½ é€šå¸¸ä¼šè§åˆ°å…¶è¿”å›å€¼ç±»å‹æ˜¯ voidï¼šfunction warnUser(): void { console.log(&quot;This is my warning message&quot;); } Null å’Œ UndefinedTypeScripté‡Œï¼Œundefinedå’Œnullä¸¤è€…å„è‡ªæœ‰è‡ªå·±çš„ç±»å‹åˆ†åˆ«å«åšundefinedå’Œnullã€‚ å’Œ voidç›¸ä¼¼ï¼Œå®ƒä»¬çš„æœ¬èº«çš„ç±»å‹ç”¨å¤„ä¸æ˜¯å¾ˆå¤§ï¼šlet u: undefined = undefined;let n: null = null; é»˜è®¤æƒ…å†µä¸‹nullå’Œundefinedæ˜¯æ‰€æœ‰ç±»å‹çš„å­ç±»å‹ã€‚ å°±æ˜¯è¯´ä½ å¯ä»¥æŠŠ nullå’Œundefinedèµ‹å€¼ç»™numberç±»å‹çš„å˜é‡ã€‚Neverneverç±»å‹è¡¨ç¤ºçš„æ˜¯é‚£äº›æ°¸ä¸å­˜åœ¨çš„å€¼çš„ç±»å‹// è¿”å›neverçš„å‡½æ•°å¿…é¡»å­˜åœ¨æ— æ³•è¾¾åˆ°çš„ç»ˆç‚¹function error(message: string): never { throw new Error(message); } // æ¨æ–­çš„è¿”å›å€¼ç±»å‹ä¸ºneverfunction fail() { return error(&quot;Something failed&quot;); } // è¿”å›neverçš„å‡½æ•°å¿…é¡»å­˜åœ¨æ— æ³•è¾¾åˆ°çš„ç»ˆç‚¹function infiniteLoop(): never { while (true) { } } Objectobjectè¡¨ç¤ºéåŸå§‹ç±»å‹ï¼Œä¹Ÿå°±æ˜¯é™¤numberï¼Œstringï¼Œbooleanï¼Œsymbolï¼Œnullæˆ–undefinedä¹‹å¤–çš„ç±»å‹ã€‚ä½¿ç”¨objectç±»å‹ï¼Œå°±å¯ä»¥æ›´å¥½çš„è¡¨ç¤ºåƒObject.createè¿™æ ·çš„APIã€‚ä¾‹å¦‚ï¼šdeclare function create(o: object | null): void; create({ prop: 0 }); // OKcreate(null); // OK create(42); // Errorcreate(â€œstringâ€); // Errorcreate(false); // Errorcreate(undefined); // Error ç±»å‹æ–­è¨€ å°–æ‹¬å· let someValue: any = &quot;this is a string&quot;; let strLength: number = (&lt;string&gt;someValue).length; asè¯­æ³• let someValue: any = &quot;this is a string&quot;; let strLength: number = (someValue as string).length; æ€»ç»“TypeScriptä¸­çš„æ•°æ®ç±»å‹æœ‰ï¼šUndefined :Number:æ•°å€¼ç±»å‹;string : å­—ç¬¦ä¸²ç±»å‹;Boolean: å¸ƒå°”ç±»å‹ï¼›enumï¼šæšä¸¾ç±»å‹ï¼›any : ä»»æ„ç±»å‹ï¼Œä¸€ä¸ªç‰›Xçš„ç±»å‹ï¼›voidï¼šç©ºç±»å‹ï¼›Array : æ•°ç»„ç±»å‹;Tuple : å…ƒç¥–ç±»å‹ï¼›Null ï¼šç©ºç±»å‹ é™„ä¸Šæˆ‘åœ¨å­¦ä¹ tsçš„æ—¶å€™å†™çš„æµ‹è¯•ä»£ç `ts //æ•°ç»„å£°æ˜let arr1:number[] //å£°æ˜æ•°å€¼ç±»å‹çš„æ•°ç»„let arr2:Array//å£°æ˜å­—ç¬¦ä¸²ç±»å‹çš„æ•°ç»„ //å­—é¢é‡èµ‹å€¼let arr3:number[] = []let arr4:number[] = [1,2,3,4]let arr5:Array=[â€˜1â€™,â€™3â€™,â€™6â€™]let someValue:string=â€™this is a boyâ€™let strLength:number = (someValue).length// console.log(strLength)let arr6:Array=[true,false,true]//å…ƒç¥–ç±»å‹let x:[string,number]x=[â€˜1â€™,2]//å¼•ç”¨ç±»å‹å­—ç¬¦ä¸²let like:String = new String(â€˜codeâ€™)// console.log(like)//å¼•ç”¨ç±»å‹æ—¥æœŸå¯¹è±¡let d:Date = new Date()//ä¼ é€’ä¸€ä¸ªæ•´æ•°let da:Date = new Date(1000)console.log(da)//ä¼ é€’ä¸€ä¸ªå­—ç¬¦ä¸²//yyyy/MM/dd hh:mm:ssï¼Œyyyy-MM-dd hh:mm:ssï¼Œyyyy-MM-ddThh:mm:sslet dt:Date = new Date(â€˜2018/09/06 05:30:00â€™)// console.log(dt)//æ­£åˆ™è¡¨è¾¾å¼ let reg1:RegExp = new RegExp(â€˜codeâ€™)let reg2:RegExp = new RegExp(â€˜codeâ€™,â€™giâ€™)let reg3:RegExp = /code/let reg4:RegExp = /code/gilet site:string = â€˜codeview.comâ€™let isT:boolean = reg3.test(site)// console.log(isT)console.log(reg4.exec(site))` ^^ä¸‹ä¸€èŠ‚ tsç« ä¹‹æ¥å£","categories":[],"tags":[]},{"title":"canvasæµ·æŠ¥","slug":"canvasæµ·æŠ¥","date":"2019-06-19T07:28:35.000Z","updated":"2019-06-19T07:28:43.080Z","comments":true,"path":"2019/06/19/canvasæµ·æŠ¥/","link":"","permalink":"https://github.com/lifenglei/2019/06/19/canvasæµ·æŠ¥/","excerpt":"","text":"åˆ†äº«åˆ°æœ‹å‹åœˆæµ·æŠ¥ç”Ÿæˆå®ç°ä¸´æ—¶æ¥åˆ°ä¸€ä¸ªéœ€æ±‚éœ€è¦å®ç°ä¸€ä¸ªåˆ†äº«åˆ°æœ‹å‹åœˆçš„åŠŸèƒ½ ç”¨æˆ·ç‚¹å‡»åˆ†äº«åˆ°æœ‹å‹åœˆæŒ‰é’®åè¦ç”Ÿæˆæµ·æŠ¥å›¾ æ–¹ä¾¿ç”¨æˆ·ä¿å­˜åˆ†äº« åˆšæ¥åˆ°è¿™ä¸ªéœ€æ±‚çš„æ—¶å€™æ˜¯ä¸€è„¸æ‡µé€¼ æ¥ç€æ˜¯ä¸‰è„¸æ‡µé€¼ åœ¨æŠ€æœ¯ç¾¤é‡Œå’¨è¯¢ ç„¶è€Œå¹¶æ²¡æœ‰æ‰¾åˆ°ç­”æ¡ˆ æ€è€ƒä¸€ç•ªåæˆ‘å†³å®šä½¿ç”¨canvaså»å®ç° ç„¶è€Œæˆ‘è®¤è¯†canvas canvaså´ä¸è®¤è¯†æˆ‘ åªå¥½å½“å¤©æ™šä¸Šçœ‹canvasçš„api éš”å¤©å®Œæˆäº†è¿™ä¸ªéœ€æ±‚ ä¸‹é¢åˆ†äº«ä¸‹ç»˜åˆ¶çš„è¿‡ç¨‹ ä¹Ÿæ˜¯è‡ªå·±çš„ä¸€ä¸ªæ€»ç»“ä¸€ï¼šcanvasæœ‰å“ªäº›åŠŸèƒ½1.ç»˜åˆ¶å›¾å½¢ 2.ç»˜åˆ¶å›¾åƒ 3.ç»˜åˆ¶æ–‡å­— äºŒï¼šcanvasçš„ç»˜åˆ¶æ­¥éª¤canvaså°±æ˜¯ç”»å›¾ é‚£ä¹ˆåˆ°åº•è¯¥æ€ä¹ˆç”»å›¾å‘¢ é¦–å…ˆå¤§å®¶è¦æ˜ç™½canvas 2Dç¯å¢ƒåæ ‡ç³» ä¸‹é¢ä»¥ä¸€å¼ ç®€å•çš„å›¾æ¥è¯´æ˜ä¸€ä¸‹(æ³¨ï¼šè¯¥å›¾æ¥è‡ªä¸ºw3cPlus)ç›¸ä¿¡å­¦è¿‡åæ ‡ç³»ç³»ç»Ÿçš„åŒå­¦éƒ½èƒ½æ˜ç™½è¿™å¼ å›¾çš„æ„æ€ å…¶å®canvaså°±æ˜¯åœ¨æ­£ç¡®çš„ä½ç½®ç”¨æ­£ç¡®çš„apiç»˜åˆ¶å‡ºè‡ªå·±æƒ³è¦çš„å›¾ æ­£ç¡®çš„ä½ç½®å°±æ˜¯éœ€è¦åæ ‡æ¥ä½“ç°çš„ è®¾è®¡ç¨¿å‘ˆç° ä»£ç éƒ¨åˆ† è¦æƒ³å­¦å¥½canvaså¯¹ç€ä»£ç çœ‹ä¸€å¥ ç„¶åå°±ç¿»çœ‹canvasçš„api import wepy from &#39;wepy&#39; let app = getApp() export default class tczan extends wepy.component { props = { ob:{ type:Object, default:{ //å¤´åƒè·¯å¾„ } } } methods = { saveImageToPhotosAlbum(){ this.savePhoto() } } //æ–‡å­—æ¢è¡Œ canvasWrapText(text,cs,x, y, maxWidth, lineHeight){ // å­—ç¬¦åˆ†éš”ä¸ºæ•°ç»„ var arrText = text.split(&#39;&#39;); var line = &#39;&#39;; for (var n = 0; n &lt; arrText.length; n++) { var testLine = line + arrText[n]; var metrics = cs.measureText(testLine); var testWidth = metrics.width; if (testWidth &gt; maxWidth &amp;&amp; n &gt; 0) { cs.fillText(line, x, y); line = arrText[n]; y += lineHeight; } else { line = testLine; } } cs.fillText(line, x, y); } onLoad(options){ wx.downloadFile({ url: this.ob.avatarUrl }) this.imageToPhotosAlbum() } savePhoto(){ wx.showLoading({ title:&#39;ä¿å­˜ä¸­...&#39; }) var that = this; var unit = that.ob.screenWidth/375 wx.canvasToTempFilePath({ x: 0, y: 0, width: unit * 375, height: unit * 462.5, destWidth: unit * 375, destHeight: unit * 462.5, canvasId: &#39;share&#39;, success: function (res) { that.ob.shareImgPath=res.tempFilePath if (!res.tempFilePath) { wx.showModal({ title: &#39;æç¤º&#39;, content: &#39;å›¾ç‰‡ç»˜åˆ¶ä¸­ï¼Œè¯·ç¨åé‡è¯•&#39;, showCancel: false }) } //ç”»æ¿è·¯å¾„ä¿å­˜æˆåŠŸåï¼Œè°ƒç”¨æ–¹æ³•å§å›¾ç‰‡ä¿å­˜åˆ°ç”¨æˆ·ç›¸å†Œ wx.saveImageToPhotosAlbum({ filePath: res.tempFilePath, //ä¿å­˜æˆåŠŸå¤±è´¥ä¹‹åï¼Œéƒ½è¦éšè—ç”»æ¿ï¼Œå¦åˆ™å½±å“ç•Œé¢æ˜¾ç¤ºã€‚ success: (res) =&gt; { wx.showToast({ title: &#39;ä¿å­˜å®Œæˆ&#39;, //æ ‡é¢˜ icon: &#39;success&#39;, //å›¾æ ‡ï¼Œæ”¯æŒ&quot;success&quot;ã€&quot;loading&quot; duration: 2000 //æç¤ºçš„å»¶è¿Ÿæ—¶é—´ï¼Œå•ä½æ¯«ç§’ï¼Œé»˜è®¤ï¼š1500 }) that.ob.canvasHidden=true }, fail: (err) =&gt; { wx.showToast({ title: &#39;ä¿å­˜å¤±è´¥&#39;, //æ ‡é¢˜ icon: &#39;&#39;, //å›¾æ ‡ï¼Œæ”¯æŒ&quot;success&quot;ã€&quot;loading&quot; duration: 2000, //æç¤ºçš„å»¶è¿Ÿæ—¶é—´ï¼Œå•ä½æ¯«ç§’ï¼Œé»˜è®¤ï¼š1500 mask: false //æ˜¯å¦æ˜¾ç¤ºé€æ˜è’™å±‚ï¼Œé˜²æ­¢è§¦æ‘¸ç©¿é€ï¼Œé»˜è®¤ï¼šfalse }) that.ob.canvasHidden=true } }) } }) } imageToPhotosAlbum(){ wx.showLoading({ title:&#39;ç”Ÿæˆä¸­...&#39; }) var that = this; that.canvasHidden = false var unit = that.ob.screenWidth/375 var {avatarurl,cover,nickName,type,poi,description,title}=that.ob var context = wx.createCanvasContext(&#39;share&#39;) var description = that.ob.description var wxappName = &quot;æ‰“å¼€å°ç¨‹åºé©¬ä¸Šæµè§ˆ&quot; var gradient = context.createLinearGradient(0, 0, unit * 50, 0); //ç»˜åˆ¶æ¸å˜éƒ¨åˆ† gradient.addColorStop(0,&quot;#F3EED1&quot;); gradient.addColorStop(1,&quot;#EDE5B7&quot;); context.fillStyle=gradient; context.fillRect(-unit*20,unit*10,unit *85,unit *50); var gradients = context.createLinearGradient(0, 0, unit * 50, 0); //ç»˜åˆ¶æ¸å˜éƒ¨åˆ† gradients.addColorStop(0,&quot;#F3EED1&quot;); gradients.addColorStop(1,&quot;#fff&quot;); context.fillStyle=gradients; context.fillRect(-unit*40,unit*90,unit *100,unit *50); context.drawImage(`${cover}`, unit * 140, unit * 455, unit * 64, unit * 64) context.drawImage(`${cover}`, unit * 40, unit * 175, unit * 255, unit * 150) //ç»˜åˆ¶æ–‡æœ¬ context.font=&quot;bold 12px PingFangSC-Medium&quot;; context.setFillStyle(&#39;#666&#39;) context.fillText(`${nickName}`, unit * 90, unit * 30) //ç»˜åˆ¶æ–‡å­— context.font=&quot;12px PingFangSC-Light&quot;; context.setFillStyle(&#39;#999&#39;) context.fillText(`æ¨èäº†1ç¯‡${type}`, unit * 90, unit * 53) //ç»˜åˆ¶æ–‡å­— context.fillText(`${poi}`, unit * 40, unit * 160) //ç»˜åˆ¶æ–‡å­— context.fillText(wxappName, unit * 115, unit * 580) context.setFontSize(14) context.setFillStyle(&quot;#999&quot;) context.fillText(&quot;é•¿æŒ‰è¯†åˆ«å°ç¨‹åº&quot;, unit * 115, unit * 560) //ç»˜åˆ¶æ–‡å­— that.canvasWrapText(`${description}`,context, unit * 40, unit * 355,unit * 255,unit * 24) context.font=&quot;24px PingFangSC-Medium&quot;; context.setFillStyle(&#39;#444&#39;) that.canvasWrapText(`${title}`,context, unit * 40, unit * 129,unit * 225,unit * 24) //åœ†å½¢è£å‰ªå¡«å……å¤´åƒ context.save() context.beginPath() context.lineWidth = unit *8; context.strokeStyle = &quot;#fff&quot;;//çº¿æ¡çš„é¢œè‰² context.lineCap = &quot;round&quot;; context.arc(unit * 59, unit * 36, unit *22, 0, 2 * Math.PI,true) context.stroke(); context.closePath(); context.clip() context.drawImage(`${cover}`, unit * 33, unit *10, unit * 50, unit * 50) context.restore() wx.hideLoading() context.draw(false, function () { }); } } è®¾è®¡ç¨¿è¿˜åŸ ï¼ˆéƒ¨åˆ†å­—æ®µæ²¡æœ‰ è®¾è®¡å˜æ›´ å›¾ä¸­ä¸å±•ç¤ºï¼‰ è¿˜åŸèƒ½åŠ›æœ‰é™ ç›®å‰è¿˜åœ¨è¿›è¡Œç»†èŠ‚è°ƒæ•´ ä½†æ˜¯å·²ç»å…·å¤‡é›å½¢ ä»æ‡µé€¼åˆ°ç†è§£ åˆ°å®Œæˆéœ€æ±‚ æˆ‘è§‰å¾—ä¹Ÿæ˜¯ä¸€ç§è¿›æ­¥å§canvasçš„apiå¾ˆå¤š é‡åœ¨ç†è§£å’Œè‡ªå·±åŠ¨æ‰‹æ“ä½œ å¯ä»¥çœ‹çœ‹w3cä¸Šçš„æ•™ç¨‹","categories":[],"tags":[]},{"title":"vueConfæ€»ç»“","slug":"vueConfæ€»ç»“","date":"2019-06-19T07:23:26.000Z","updated":"2019-06-19T07:23:43.499Z","comments":true,"path":"2019/06/19/vueConfæ€»ç»“/","link":"","permalink":"https://github.com/lifenglei/2019/06/19/vueConfæ€»ç»“/","excerpt":"","text":"vueConf 2019 å°¤é›¨æºªæ¼”è®²æ€»ç»“ è·ç¦»å‚åŠ  VueConfç¬¬ä¸€å±Šå¤§ä¼šå·²ç»å¾ˆä¹…äº†ï¼Œyuboçš„ä»‹ç»ä¸€å¦‚æ—¢å¾€çš„æœ‰æ„æ€â¤ï¸ï¼Œæ˜¯ä»–çš„åŠªåŠ›ä¿æŒäº†å¤§ä¼šçƒ­æƒ…çš„ç¤¾åŒºæ°›å›´ï¼å¦ä¸€ä¸ªå½©è›‹å°±æ˜¯Evan You å¸¦äº†è‡ªå·±çš„äº²äººå’Œå­©å­æ¥åˆ°ç°åœºï¼ŒçœŸçš„æ˜¯å…¶ä¹èèï¼ å°¤é›¨æºª@State of vue å‘å±•ç°çŠ¶#####Chrome DevTools æœ‰çº¦ 90 ä¸‡çš„å‘¨æ´»ç”¨æˆ·ï¼ŒReact ç›¸æ¯”æœ‰ 160 ä¸‡ã€‚Evan æ¨èç”¨ Chrome DevTools æ¥é¢„æµ‹ Vue çš„é¡¹ç›®çš„çœŸå®å¼€å‘è€…æ•°æ®ã€‚Vue æœ‰å…¨çƒåŒ–çš„å½±å“åŠ›ï¼Œåœ¨éå¸¸å¤šçš„å›½å®¶æœ‰ç›¸åº”çš„æ´»åŠ¨ï¼Œå¯ä»¥ é€šè¿‡ events.vuejs.org æŸ¥æ‰¾ã€‚State of JavaScript 2018 å¹´ç»Ÿè®¡è¯´æ˜åœ¨å‰ç«¯æ¡†æ¶çš„æ»¡æ„åº¦æ˜¯ç¬¬ä¸€åï¼ˆ91%ï¼‰ï¼Œå¹¶åœ¨ Stack Overflow çš„æ•°æ®é‡Œä½“ç°æ˜¯ç¬¬äºŒå—æ¬¢è¿çš„å‰ç«¯æ¡†æ¶ã€‚ å›¢é˜Ÿ####ç°åœ¨ Vue æœ‰ 20 äººæ´»è·ƒçš„å¼€å‘è€…ï¼Œå¤§éƒ¨åˆ†æ—¥å¸¸å·¥ä½œä¸Vue ç›¸å…³ï¼Œå®Œå…¨ç‹¬ç«‹è¿è¥ï¼Œè€Œæˆæœ¬ä¸»è¦æ¥è‡ªäºèµåŠ©å•†ï¼Œå¹´æ¥ç¨³æ­¥å¢é•¿ã€‚è’‹è±ªç¾¤ï¼ˆ@sodateaï¼‰å…¨èŒåœ¨ç»´æŠ¤CLIåŠç›¸å…³å·¥å…·é“¾ã€‚ è¿›å±• ####è‡ª 2018 å¹´å¹´åº•æœ‰è¿‡é¢„å‘Š Vue.js 3.0 çš„è®¾å®šç›®æ ‡ï¼Œå…¶å®åœ¨ä»Šå¹´å¹´åˆçš„æ—¶å€™å¤§éƒ¨åˆ†åŠŸèƒ½å·²ç»å®ç°ã€‚ä½†åŒæ—¶ï¼Œåœ¨å¼€å‘çš„åŒæ˜¯ä¹Ÿåœ¨ç ”ç©¶ä¸šç•Œæœ€æ–°çš„æ–¹æ¡ˆï¼ŒVue åœ¨ 3.0 ä½¿ç”¨äº† Proxy çš„åŠŸèƒ½ï¼Œä½†æ˜¯ IE 11 ä»ç„¶æ— æ³•æ”¯æŒå´æœ‰ä¸€å®šå¸‚åœºå æœ‰ç‡ã€‚ æ›´å¿« #####1.Object.defineProperty -&gt; Proxyï¼šProxy ä¸éœ€è¦å¯¹åŸå§‹å¯¹è±¡åšå¤ªå¤šæ”¹åŠ¨ï¼Œæ•ˆç‡æ›´é«˜ 2.Virtual DOM é‡æ„ï¼šç»„å»ºçš„å¯åŠ¨é€Ÿåº¦ç­‰æ¯” 2.5 å¿«äº†ä¸€å€ï¼Œç”Ÿæˆ VNode å‚æ•°ä¸€è‡´åŒ–ã€‚ä½†æ˜¯è¿˜æ˜¯å¯ä»¥åšçš„æ›´å¥½ï¼ŒVirtual DOM çš„ç›®çš„å¹¶éåªæ˜¯é€Ÿåº¦ï¼Œå…¶æ ¸å¿ƒä»·å€¼åœ¨äºç”¨ JavaScript è¡¨è¾¾ DOM çŠ¶æ€ï¼Œå› æ­¤å®ƒæœ¬èº«å…¶å®æ˜¯æœ‰æˆæœ¬çš„ã€‚å³æ¯æ¬¡æ›´æ–°æ—¶ï¼Œ vdom æ ‘éœ€è¦æ¯æ¬¡éƒ½é‡æ–°å»ºç«‹ï¼Œå› æ­¤ä¼ ç»Ÿçš„ vdom æ˜¯æœ‰æ€§èƒ½ç“¶é¢ˆã€‚è€Œè¿™èƒŒåçš„åŸå› æ˜¯ vdom æœ€æ—©æ˜¯ç”± JSX å†™çš„è¡¨è¾¾é€»è¾‘ï¼ˆçµæ´»æ€§ï¼‰ï¼Œè€Œéæ˜¯æ¨¡ç‰ˆè¯­è¨€ï¼Œå› æ­¤ä¸èƒ½é€šè¿‡æ¨¡ç‰ˆå†…å®¹æ¨æµ‹ä¸€äº›ä¿¡æ¯ã€‚ 3.å¦‚ä½•æœ€å¤§åŒ–çš„åŠ¨é™ç»“åˆï¼Ÿå³å…¼å®¹ render function çš„çµæ´»æ€§ï¼ŒåŠæ¨¡ç‰ˆè¡¨è¾¾çš„ä¿¡æ¯å°†ä¸€ä¸ªé€»è¾‘å†…éƒ¨ã€å¤–éƒ¨çš„èŠ‚ç‚¹åˆ†å¼€ï¼Œæ¯ä¸ªåŠ¨æ€èŠ‚ç‚¹å½“æˆä¸€ä¸ª (fragment) è¿™ä½¿å¾—åŠ¨æ€èŠ‚ç‚¹åˆ«è¯åªä¼šå‡ºç°åœ¨å¦‚ v-ifã€v-for è¿™æ ·çš„ç»“æ„æ€§æŒ‡ä»¤ä¹‹ä¸‹ã€‚å°†èŠ‚ç‚¹å…³ç³»åˆ‡åˆ†ä¸ºä¸€ä¸ªä¸€ä¸ªçš„åŒºå—æ ‘ï¼ˆBlock Treeï¼Œæ¢—ğŸ˜Šï¼‰ï¼Œå‡å°‘æ— è°“çš„éå†ã€‚ è¿™ä½¿å¾—vdom çš„æ›´æ–°æ€§èƒ½ä¸æ¨¡ç‰ˆå¤§å°ç›¸å…³ =&gt; ä¸åŠ¨æ€å†…å®¹çš„æ•°é‡ç›¸å…³ï¼ˆå³å“ªå„¿éœ€è¦æ”¹ï¼Œå°±åªè®©å“ªå„¿æ”¹ï¼Œåªå®ç°æœ€å°æ“ä½œï¼‰é€Ÿåº¦ä¼˜åŒ–ï¼š2.6.10ï¼ˆ36msï¼‰ï¼Œ3.0ï¼ˆ5.44msï¼‰çº¦ 6 å€çš„é€Ÿåº¦å¢é•¿ TypeScript Class API âŒï¼š åŸæœ¬çš„ç›®çš„æ˜¯æ”¯æŒ TypeScriptï¼šthis ä¸‹çš„å±æ€§ç±»å‹æ¨åˆ°æ— æ³•æœ‰æ•ˆå®ç°ï¼ŒDecorator ææ¡ˆå¾ˆä¸ç¨³å®š Class API é™¤äº†ä½¿ç”¨äº†åŸç”Ÿæ„ˆå‘ï¼Œå¹¶æœªå¸¦æ¥ä»»ä½•æ–°çš„ä¼˜åŠ¿ï¼ŒOOP é‡Œçš„ç»§æ‰¿ç­‰ä»·å€¼åœ¨ UI å±‚ä½¿ç”¨è¾ƒå°‘ Function-based API âœ…ï¼š æ›´å¥½çš„ TypeScript ç±»å‹æ¨å¯¼æ”¯æŒï¼ˆä¸éœ€è¦ä»»ä½•æ‰‹åŠ¨çš„ç±»å‹å£°æ˜ï¼Œä¸€å¥—ä»£ç åŒæ—¶æ”¯æŒï¼‰ï¼Œæ›´çµæ´»çš„é€»è¾‘å¤ç”¨ï¼ˆæ²¡æœ‰å‘½åå†²çªã€props ç­‰æ•°æ®æ¥æºæ›´æ¸…æ™°ã€æ²¡æœ‰é¢å¤–çš„åˆ›å»ºæˆæœ¬ï¼‰ï¼ŒTree-shaking å‹å¥½ï¼Œä»£ç å¯ä»¥è¢«å‹ç¼©é€»è¾‘å¤ç”¨æ¡ˆä¾‹ï¼šé¼ æ ‡ä½ç½®ç›‘å¬mixins å½“å¤§é‡ä½¿ç”¨æ—¶å€™ âŒ å‘½åç©ºé—´å†²çª âŒ æ¨¡æ¿æ•°æ®æ¥æºä¸æ¸…æ™°é«˜é˜¶ç»„ä»¶ å½“é«˜é˜¶ç»„ä»¶å¤§é‡ä½¿ç”¨æ—¶å€™ âŒ propså‘½åç©ºé—´å†²çª âŒ propsæ¥æºä¸æ¸…æ™° âŒ é¢å¤–çš„ç»„ä»¶å®ä¾‹æ€§èƒ½æ¶ˆè€— Renderless Components ä½œç”¨åŸŸæ’æ§½ å½“ä½¿ç”¨ä½œç”¨åŸŸæ’æ§½æ—¶å€™ âœ… æ²¡æœ‰å‘½åç©ºé—´å†²çª âœ… æ•°æ®æ¥æºæ¸…æ™° âŒ é¢å¤–çš„ç»„ä»¶å®ä¾‹æ€§èƒ½æ¶ˆè€—with New API å½“ä½¿ç”¨æ–°çš„apiæ—¶å€™ âœ… æ²¡æœ‰å‘½åç©ºé—´å†²çª âœ… æ•°æ®æ¥æºæ¸…æ™° âœ… æ²¡æœ‰é¢å¤–çš„ç»„ä»¶å®ä¾‹æ€§èƒ½æ¶ˆè€— å¯¹æ¯”React Hooks åŒæ ·çš„é€»è¾‘ç»„åˆã€å¤ç”¨èƒ½åŠ› åªè°ƒç”¨ä¸€æ¬¡ ç¬¦åˆjsç›´è§‰ æ²¡æœ‰é—­åŒ…å˜é‡é—®é¢˜ æ²¡æœ‰å†…å­˜/GCå‹åŠ› ä¸å­˜åœ¨å†…è”å›è°ƒå¯¼è‡´å­ç»„ä»¶æ— æ³•æ°¸è¿œæ›´æ–° æ›´å¤šRFCè¯¦æƒ… Q&amp;A1.Vue.js 3.0 è¿˜æœ‰å“ªäº›ä¸è¶³ï¼Ÿ IE 11 è¿˜æ˜¯ä¼šæ”¯æŒï¼Œåªæ˜¯ä¼šé¢å¤–èŠ±æ—¶é—´æ¥è§£å†³ã€‚æ­¤å¤–ï¼Œ3.0 çš„åŠ£åŠ¿éƒ½åœ¨å°½åŠ›è§£å†³ 3.0 æ˜¯å¦æœ‰ç ´åæ€§çš„æ”¹åŠ¨ï¼Ÿå‡çº§æ•ˆç‡ï¼Ÿè¿™å°±æ˜¯ RFC çš„ä»·å€¼ï¼Œæ‰€æœ‰çš„é‡å¤§æ”¹å˜ã€èƒŒåçš„æ„ä¹‰ã€å¦‚ä½•åº”å¯¹è¿™äº›ä¿®æ”¹ã€‚åŸºæœ¬çš„ä¿®æ”¹éƒ½ä¼šæœ‰è‡ªåŠ¨åŒ–å·¥å…·æ¥æ›´æ–°ã€‚åŒæ—¶ä¼šæœ‰ä¸€ä¸ªå…¼å®¹ç‰ˆæœ¬ï¼Œé™ä½æ›´æ–°æˆæœ¬ã€‚ React æ¸²æŸ“åˆ‡ç‰‡ï¼ŒVue ä»ä¼šæœ‰ç›¸å…³æˆæœ¬ï¼Ÿåˆ‡ç‰‡å¹¶éæ˜¯ä¸‡èƒ½è¯ï¼Œåªæœ‰æç«¯æ¡ä»¶ä¸‹å¯ä»¥å®Œæˆæ€§èƒ½çš„ä¿éšœã€‚å†…éƒ¨çš„å¤æ‚åº¦è¾ƒé«˜ï¼Œå®ç°åä»æœªèƒ½æ»¡è¶³æ€§èƒ½æ•ˆæœï¼Œåˆ‡ç‰‡ä¼šè®© nextTick ç­‰ä»£ç éƒ½æœ‰ç ´åæ€§ä¿®æ”¹ï¼ˆå› ä¸ºå¯èƒ½æ˜¯å¤šä¸ª nextTickã€‚ Vue æœªæ¥çš„å‘å±•æ–¹å‘ï¼Ÿé—¨æ§›ä½ï¼Œä»·å€¼é«˜ã€‚åªè¦æœ‰äººç”¨ï¼Œå°±ä¸€ç›´ç»´æŠ¤å’Œæ›´æ–° å¾ˆå¤šä¼ä¸šç”¨æˆ·åœ¨ç”¨ Reactï¼Œå› ä¸ºåœ¨ Native æ–¹å‘æœ‰æ›´å¥½çš„å…¼å®¹ï¼ŒVue æœªæ¥ä¼šå¯¹ Native æœ‰æ›´å¥½çš„å…¼å®¹å—ï¼Ÿä¸€å¥—ä»£ç ï¼Œå¤šç«¯å®ç°ã€‚React è™½ç„¶æœ‰ React Nativeï¼Œä½†æ˜¯å„ä¸ªå‚å®¶éƒ½æœ‰ç›¸åº”çš„å¯¹ç­–ï¼ŒGoogle æœ‰Flutterã€Apple æœ‰ SwiftUIï¼Œå¤§å®¶ä¸å¯èƒ½è®©ä¸€ä¸ªå¼€å‘èŒƒå¼è¢«ä¸€ä¸ªå…¬å¸ä½¿ç”¨ã€‚æ°å¥½ï¼ŒVue æ˜¯ç‹¬ç«‹çš„å¼€æºï¼Œæ²¡æœ‰ä¼ä¸šç«äº‰ã€‚ END","categories":[],"tags":[]},{"title":"è‡ªå®šä¹‰æŒ‡ä»¤","slug":"è‡ªå®šä¹‰æŒ‡ä»¤","date":"2019-06-19T07:22:52.000Z","updated":"2019-06-19T08:46:28.861Z","comments":true,"path":"2019/06/19/è‡ªå®šä¹‰æŒ‡ä»¤/","link":"","permalink":"https://github.com/lifenglei/2019/06/19/è‡ªå®šä¹‰æŒ‡ä»¤/","excerpt":"","text":"è‡ªå®šä¹‰æŒ‡ä»¤directive,æ··åˆmixinsä¸€.è‡ªå®šä¹‰æŒ‡ä»¤directive é™¤äº†æ ¸å¿ƒåŠŸèƒ½é»˜è®¤å†…ç½®çš„æŒ‡ä»¤ (v-model å’Œ v-show)ï¼ŒVue ä¹Ÿå…è®¸æ³¨å†Œè‡ªå®šä¹‰æŒ‡ä»¤ã€‚æ³¨æ„ï¼Œåœ¨ Vue2.0 ä¸­ï¼Œä»£ç å¤ç”¨å’ŒæŠ½è±¡çš„ä¸»è¦å½¢å¼æ˜¯ç»„ä»¶ã€‚ç„¶è€Œï¼Œæœ‰çš„æƒ…å†µä¸‹ï¼Œä½ ä»ç„¶éœ€è¦å¯¹æ™®é€š DOM å…ƒç´ è¿›è¡Œåº•å±‚æ“ä½œï¼Œè¿™æ—¶å€™å°±ä¼šç”¨åˆ°è‡ªå®šä¹‰æŒ‡ä»¤ã€‚æ¥ä¸ªå®ä¾‹ï¼Œå½“é¡µé¢åŠ è½½æ—¶ï¼Œè¯¥inputå…ƒç´ å°†è·å¾—ç„¦ç‚¹ï¼š æ³¨å†Œä¸€ä¸ªå…¨å±€è‡ªå®šä¹‰æŒ‡ä»¤ v-focusVue.directive(&#39;focus&#39;, { // å½“è¢«ç»‘å®šçš„å…ƒç´ æ’å…¥åˆ° DOM ä¸­æ—¶â€¦â€¦ inserted: function (el) { // èšç„¦å…ƒç´  el.focus() } }) å¦‚æœæƒ³æ³¨å†Œå±€éƒ¨æŒ‡ä»¤ï¼Œç»„ä»¶ä¸­ä¹Ÿæ¥å—ä¸€ä¸ª directives çš„é€‰é¡¹ï¼šdirectives: { focus: { // æŒ‡ä»¤çš„å®šä¹‰ inserted: function (el) { el.focus() } } } ç„¶åä½ å¯ä»¥åœ¨æ¨¡æ¿ä¸­ä»»ä½•å…ƒç´ ä¸Šä½¿ç”¨æ–°çš„ v-focus å±æ€§ï¼Œå¦‚ä¸‹ï¼š&lt;input v-focus&gt; é’©å­å‡½æ•° ä¸€ä¸ªæŒ‡ä»¤å®šä¹‰å¯¹è±¡å¯ä»¥æä¾›å¦‚ä¸‹å‡ ä¸ªé’©å­å‡½æ•° (å‡ä¸ºå¯é€‰)ï¼š bindï¼šåªè°ƒç”¨ä¸€æ¬¡ï¼ŒæŒ‡ä»¤ç¬¬ä¸€æ¬¡ç»‘å®šåˆ°å…ƒç´ æ—¶è°ƒç”¨ã€‚åœ¨è¿™é‡Œå¯ä»¥è¿›è¡Œä¸€æ¬¡æ€§çš„åˆå§‹åŒ–è®¾ç½®ã€‚ insertedï¼šè¢«ç»‘å®šå…ƒç´ æ’å…¥çˆ¶èŠ‚ç‚¹æ—¶è°ƒç”¨ (ä»…ä¿è¯çˆ¶èŠ‚ç‚¹å­˜åœ¨ï¼Œä½†ä¸ä¸€å®šå·²è¢«æ’å…¥æ–‡æ¡£ä¸­)ã€‚ updateï¼šæ‰€åœ¨ç»„ä»¶çš„ VNode æ›´æ–°æ—¶è°ƒç”¨ï¼Œä½†æ˜¯å¯èƒ½å‘ç”Ÿåœ¨å…¶å­ VNode æ›´æ–°ä¹‹å‰ã€‚æŒ‡ä»¤çš„å€¼å¯èƒ½å‘ç”Ÿäº†æ”¹å˜ï¼Œä¹Ÿå¯èƒ½æ²¡æœ‰ã€‚ä½†æ˜¯ä½ å¯ä»¥é€šè¿‡æ¯”è¾ƒæ›´æ–°å‰åçš„å€¼æ¥å¿½ç•¥ä¸å¿…è¦çš„æ¨¡æ¿æ›´æ–° (è¯¦ç»†çš„é’©å­å‡½æ•°å‚æ•°è§ä¸‹)ã€‚ componentUpdatedï¼šæŒ‡ä»¤æ‰€åœ¨ç»„ä»¶çš„ VNode åŠå…¶å­ VNode å…¨éƒ¨æ›´æ–°åè°ƒç”¨ã€‚ unbindï¼šåªè°ƒç”¨ä¸€æ¬¡ï¼ŒæŒ‡ä»¤ä¸å…ƒç´ è§£ç»‘æ—¶è°ƒç”¨ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹é’©å­å‡½æ•°çš„å‚æ•° (å³ elã€bindingã€vnode å’Œ oldVnode)ã€‚é’©å­å‡½æ•°å‚æ•° æŒ‡ä»¤é’©å­å‡½æ•°ä¼šè¢«ä¼ å…¥ä»¥ä¸‹å‚æ•°ï¼š el:æŒ‡ä»¤æ‰€ç»‘å®šçš„å…ƒç´ ï¼Œå¯ä»¥ç”¨æ¥ç›´æ¥æ“ä½œ DOM ã€‚ binding:ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«ä»¥ä¸‹å±æ€§: name:æŒ‡ä»¤åï¼Œä¸åŒ…æ‹¬ v- å‰ç¼€ã€‚ value:æŒ‡ä»¤çš„ç»‘å®šå€¼ï¼Œä¾‹å¦‚ï¼šv-my-directive=â€1 + 1â€ ä¸­ï¼Œç»‘å®šå€¼ä¸º 2ã€‚ oldValue:æŒ‡ä»¤ç»‘å®šçš„å‰ä¸€ä¸ªå€¼ï¼Œä»…åœ¨ update å’Œ componentUpdated é’©å­ä¸­å¯ç”¨ã€‚æ— è®ºå€¼æ˜¯å¦æ”¹å˜éƒ½å¯ç”¨ã€‚ expression:å­—ç¬¦ä¸²å½¢å¼çš„æŒ‡ä»¤è¡¨è¾¾å¼ã€‚ä¾‹å¦‚ v-my-directive=â€1 + 1â€ ä¸­ï¼Œè¡¨è¾¾å¼ä¸º â€œ1 + 1â€ã€‚ arg: ä¼ ç»™æŒ‡ä»¤çš„å‚æ•°ï¼Œå¯é€‰ã€‚ä¾‹å¦‚ v-my-directive:foo ä¸­ï¼Œå‚æ•°ä¸º â€œfooâ€ã€‚ modifiers:ä¸€ä¸ªåŒ…å«ä¿®é¥°ç¬¦çš„å¯¹è±¡ã€‚ä¾‹å¦‚ï¼šv-my-directive.foo.bar ä¸­ï¼Œä¿®é¥°ç¬¦å¯¹è±¡ä¸º { foo: true, bar: true }ã€‚ vnode: Vue ç¼–è¯‘ç”Ÿæˆçš„è™šæ‹ŸèŠ‚ç‚¹ã€‚ç§»æ­¥ VNode API æ¥äº†è§£æ›´å¤šè¯¦æƒ…ã€‚ oldVnode: ä¸Šä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼Œä»…åœ¨ update å’Œ componentUpdated é’©å­ä¸­å¯ç”¨ã€‚ é™¤äº† el ä¹‹å¤–ï¼Œå…¶å®ƒå‚æ•°éƒ½åº”è¯¥æ˜¯åªè¯»çš„ï¼Œåˆ‡å‹¿è¿›è¡Œä¿®æ”¹ã€‚å¦‚æœéœ€è¦åœ¨é’©å­ä¹‹é—´å…±äº«æ•°æ®ï¼Œå»ºè®®é€šè¿‡å…ƒç´ çš„ dataset æ¥è¿›è¡Œã€‚ è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨äº†è¿™äº›å±æ€§çš„è‡ªå®šä¹‰é’©å­æ ·ä¾‹ï¼š Vue.directive(&#39;demo&#39;, { bind: function (el, binding, vnode) { var s = JSON.stringify el.innerHTML = &#39;name: &#39; + s(binding.name) + &#39;&lt;br&gt;&#39; + &#39;value: &#39; + s(binding.value) + &#39;&lt;br&gt;&#39; + &#39;expression: &#39; + s(binding.expression) + &#39;&lt;br&gt;&#39; + &#39;argument: &#39; + s(binding.arg) + &#39;&lt;br&gt;&#39; + &#39;modifiers: &#39; + s(binding.modifiers) + &#39;&lt;br&gt;&#39; + &#39;vnode keys: &#39; + Object.keys(vnode).join(&#39;, &#39;) } }) new Vue({ el: &#39;#hook-arguments-example&#39;, data: { message: &#39;hello!&#39; } }) ç»“æœï¼š name: &quot;demo&quot; value: &quot;hello!&quot; expression: &quot;message&quot; argument: &quot;foo&quot; modifiers: {&quot;a&quot;:true,&quot;b&quot;:true} vnode keys: tag, data, children, text, elm, ns, context, fnContext, fnOptions, fnScopeId, key, componentOptions, componentInstance, parent, raw, isStatic, isRootInsert, isComment, isCloned, isOnce, asyncFactory, asyncMeta, isAsyncPlaceholder åœ¨å¾ˆå¤šæ—¶å€™ï¼Œä½ å¯èƒ½æƒ³åœ¨ bind å’Œupdateæ—¶è§¦å‘ç›¸åŒè¡Œä¸ºï¼Œè€Œä¸å…³å¿ƒå…¶å®ƒçš„é’©å­ã€‚æ¯”å¦‚è¿™æ ·å†™: Vue.directive(â€˜color-swatchâ€™, function (el, binding) { el.style.backgroundColor = binding.value }) å¯¹è±¡å­—é¢é‡ å¦‚æœæŒ‡ä»¤éœ€è¦å¤šä¸ªå€¼ï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ª JavaScript å¯¹è±¡å­—é¢é‡ã€‚è®°ä½ï¼ŒæŒ‡ä»¤å‡½æ•°èƒ½å¤Ÿæ¥å—æ‰€æœ‰åˆæ³•çš„ JavaScript è¡¨è¾¾å¼ã€‚&lt;div v-demo=&quot;{ color: &#39;white&#39;, text: &#39;hello!&#39; }&quot;&gt;&lt;/div&gt; Vue.directive(&#39;demo&#39;, function (el, binding) { console.log(binding.value.color) // =&gt; &quot;white&quot; console.log(binding.value.text) // =&gt; &quot;hello!&quot; }) æ··åˆmixinsæ··åˆ (mixins) æ˜¯ä¸€ç§åˆ†å‘ Vue ç»„ä»¶ä¸­å¯å¤ç”¨åŠŸèƒ½çš„éå¸¸çµæ´»çš„æ–¹å¼ã€‚æ··åˆå¯¹è±¡å¯ä»¥åŒ…å«ä»»æ„ç»„ä»¶é€‰é¡¹ã€‚å½“ç»„ä»¶ä½¿ç”¨æ··åˆå¯¹è±¡æ—¶ï¼Œæ‰€æœ‰æ··åˆå¯¹è±¡çš„é€‰é¡¹å°†è¢«æ··å…¥è¯¥ç»„ä»¶æœ¬èº«çš„é€‰é¡¹ã€‚ // å®šä¹‰ä¸€ä¸ªæ··åˆå¯¹è±¡ var myMixin = { created: function () { this.hello() }, methods: { hello: function () { console.log(&#39;hello from mixin!&#39;) } } } // å®šä¹‰ä¸€ä¸ªä½¿ç”¨æ··åˆå¯¹è±¡çš„ç»„ä»¶ var Component = Vue.extend({ mixins: [myMixin] }) var component = new Component() // =&gt; &quot;hello from mixin!&quot; é€‰é¡¹åˆå¹¶ å½“ç»„ä»¶å’Œæ··åˆå¯¹è±¡å«æœ‰åŒåé€‰é¡¹æ—¶ï¼Œè¿™äº›é€‰é¡¹å°†ä»¥æ°å½“çš„æ–¹å¼æ··åˆã€‚æ¯”å¦‚ï¼ŒåŒåé’©å­å‡½æ•°å°†æ··åˆä¸ºä¸€ä¸ªæ•°ç»„ï¼Œå› æ­¤éƒ½å°†è¢«è°ƒç”¨ã€‚å¦å¤–ï¼Œæ··åˆå¯¹è±¡çš„ é’©å­å°†åœ¨ç»„ä»¶è‡ªèº«é’©å­ ä¹‹å‰ è°ƒç”¨ ï¼š var mixin = { created: function () { console.log(&#39;æ··åˆå¯¹è±¡çš„é’©å­è¢«è°ƒç”¨&#39;) } } new Vue({ mixins: [mixin], created: function () { console.log(&#39;ç»„ä»¶é’©å­è¢«è°ƒç”¨&#39;) } }) // =&gt; &quot;æ··åˆå¯¹è±¡çš„é’©å­è¢«è°ƒç”¨&quot; // =&gt; &quot;ç»„ä»¶é’©å­è¢«è°ƒç”¨&quot; å€¼ä¸ºå¯¹è±¡çš„é€‰é¡¹ï¼Œä¾‹å¦‚ methods, components å’Œ directivesï¼Œå°†è¢«æ··åˆä¸ºåŒä¸€ä¸ªå¯¹è±¡ã€‚ä¸¤ä¸ªå¯¹è±¡é”®åå†²çªæ—¶ï¼Œå–ç»„ä»¶å¯¹è±¡çš„é”®å€¼å¯¹ã€‚ var mixin = { methods: { foo: function () { console.log(&#39;foo&#39;) }, conflicting: function () { console.log(&#39;from mixin&#39;) } } } var vm = new Vue({ mixins: [mixin], methods: { bar: function () { console.log(&#39;bar&#39;) }, conflicting: function () { console.log(&#39;from self&#39;) } } }) vm.foo() // =&gt; &quot;foo&quot; vm.bar() // =&gt; &quot;bar&quot; vm.conflicting() // =&gt; &quot;from self&quot; æ³¨æ„ï¼šVue.extend() ä¹Ÿä½¿ç”¨åŒæ ·çš„ç­–ç•¥è¿›è¡Œåˆå¹¶ã€‚ å…¨å±€æ··åˆ ä¹Ÿå¯ä»¥å…¨å±€æ³¨å†Œæ··åˆå¯¹è±¡ã€‚æ³¨æ„ä½¿ç”¨ï¼ ä¸€æ—¦ä½¿ç”¨å…¨å±€æ··åˆå¯¹è±¡ï¼Œå°†ä¼šå½±å“åˆ° æ‰€æœ‰ ä¹‹ååˆ›å»ºçš„ Vue å®ä¾‹ã€‚ä½¿ç”¨æ°å½“æ—¶ï¼Œå¯ä»¥ä¸ºè‡ªå®šä¹‰å¯¹è±¡æ³¨å…¥å¤„ç†é€»è¾‘ã€‚// ä¸ºè‡ªå®šä¹‰çš„é€‰é¡¹ &#39;myOption&#39; æ³¨å…¥ä¸€ä¸ªå¤„ç†å™¨ã€‚ Vue.mixin({ created: function () { var myOption = this.$options.myOption if (myOption) { console.log(myOption) } } }) new Vue({ myOption: &#39;hello!&#39; }) // =&gt; &quot;hello!&quot; è°¨æ…ä½¿ç”¨å…¨å±€æ··åˆå¯¹è±¡ï¼Œå› ä¸ºä¼šå½±å“åˆ°æ¯ä¸ªå•ç‹¬åˆ›å»ºçš„ Vueå®ä¾‹ (åŒ…æ‹¬ç¬¬ä¸‰æ–¹æ¨¡æ¿)ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåªåº”å½“åº”ç”¨äºè‡ªå®šä¹‰é€‰é¡¹ï¼Œå°±åƒä¸Šé¢ç¤ºä¾‹ä¸€æ ·ã€‚ä¹Ÿå¯ä»¥å°†å…¶ç”¨ä½œ Plugins ä»¥é¿å…äº§ç”Ÿé‡å¤åº”ç”¨ è‡ªå®šä¹‰é€‰é¡¹åˆå¹¶ç­–ç•¥ è‡ªå®šä¹‰é€‰é¡¹å°†ä½¿ç”¨é»˜è®¤ç­–ç•¥ï¼Œå³ç®€å•åœ°è¦†ç›–å·²æœ‰å€¼ã€‚å¦‚æœæƒ³è®©è‡ªå®šä¹‰é€‰é¡¹ä»¥è‡ªå®šä¹‰é€»è¾‘åˆå¹¶ï¼Œå¯ä»¥å‘ Vue.config.optionMergeStrategies æ·»åŠ ä¸€ä¸ªå‡½æ•°ï¼šVue.config.optionMergeStrategies.myOption = function (toVal, fromVal) { // return mergedVal } å¯¹äºå¤§å¤šæ•°å¯¹è±¡é€‰é¡¹ï¼Œå¯ä»¥ä½¿ç”¨ methods çš„åˆå¹¶ç­–ç•¥ï¼švar strategies = Vue.config.optionMergeStrategies strategies.myOption = strategies.methods ç»“æŸ^^","categories":[],"tags":[]},{"title":"vueæ’ä»¶å¼€å‘","slug":"vueæ’ä»¶å¼€å‘","date":"2019-06-19T07:22:21.000Z","updated":"2019-06-19T07:22:34.147Z","comments":true,"path":"2019/06/19/vueæ’ä»¶å¼€å‘/","link":"","permalink":"https://github.com/lifenglei/2019/06/19/vueæ’ä»¶å¼€å‘/","excerpt":"","text":"å¦‚ä½•å»å†™Vueæ’ä»¶ç›®çš„å®ç°ä¸€ä¸ªç®€å•çš„æç¤ºæ’ä»¶å®ç°å®˜æ–¹æ–‡æ¡£ä»‹ç»æ’ä»¶é€šå¸¸ä¼šä¸ºVueæä¾›å…¨å±€åŠŸèƒ½ã€‚æ’ä»¶çš„èŒƒå›´æ²¡æœ‰é™åˆ¶â€”-ä¸€èˆ¬æœ‰ä»¥ä¸‹ æ·»åŠ å…¨å±€æ–¹æ³•æˆ–è€…å±æ€§ï¼Œå¦‚: vue-custom-element æ·»åŠ å…¨å±€èµ„æºï¼šæŒ‡ä»¤/è¿‡æ»¤å™¨/è¿‡æ¸¡ç­‰ï¼Œå¦‚ vue-touch é€šè¿‡å…¨å±€ mixin æ–¹æ³•æ·»åŠ ä¸€äº›ç»„ä»¶é€‰é¡¹ï¼Œå¦‚: vue-router æ·»åŠ  Vue å®ä¾‹æ–¹æ³•ï¼Œé€šè¿‡æŠŠå®ƒä»¬æ·»åŠ åˆ° Vue.prototype ä¸Šå®ç°ã€‚ ä¸€ä¸ªåº“ï¼Œæä¾›è‡ªå·±çš„ APIï¼ŒåŒæ—¶æä¾›ä¸Šé¢æåˆ°çš„ä¸€ä¸ªæˆ–å¤šä¸ªåŠŸèƒ½ï¼Œå¦‚ vue-router å®˜ç½‘ç»™å‡ºçš„ä»£ç æ¡†æ¶å¦‚ä¸‹ Myplugin.install=function(Vue,options){ //æ·»åŠ å…¨å±€æ–¹æ³•æˆ–è€…å±æ€§ Vue.myGlobalMethods = function(){ ....é€»è¾‘ } } //æ·»åŠ å…¨å±€æŒ‡ä»¤ Vue.directive(&#39;my-directive&#39;,{ bind(el,binding,vnode,oldVnode){ // ...é€»è¾‘ } ... }) //æ³¨å…¥ç»„ä»¶ Vue.mixin({ created:function(){ ...//é€»è¾‘ } }) æ·»åŠ å®ä¾‹æ–¹æ³• Vue.prototype.$myMethod=function(methodOptions){ ...é€»è¾‘ } ä¸‹é¢å±•ç¤ºä¸€ä¸ªæç¤ºæ’ä»¶ 1.ç¼–å†™ç»„ä»¶toast.vue &lt;template&gt; &lt;div class=&quot;m-toast&quot; :class=&quot;{opacity}&quot; v-show=&quot;visible&quot;&gt;&lt;p v-html=&quot;html&quot;&gt;&lt;/p&gt;&lt;/div&gt; &lt;/template&gt; &lt;script&gt; export default { data () { return { opacity: false, visible: false, timer: null, html: &#39;&#39; } }, mounted () { }, methods: { /* * html æ˜¾ç¤ºçš„htmlç‰‡æ®µ * cb éšè—ä¹‹åçš„å›è°ƒå‡½æ•° * time è‡ªåŠ¨éšè—æ—¶é—´ï¼Œ-1ä¸ºä¸è¿›è¡Œéšè— * */ show (html, cb, time) { this.html = html this.visible = true this.$nextTick(() =&gt; { this.opacity = true }) window.clearTimeout(this.timer) this.timer = window.setTimeout(() =&gt; { this.opacity = false setTimeout(() =&gt; { this.visible = false }, 500) cb &amp;&amp; cb() }, time || 3000) }, hide () { this.opacity = false setTimeout(() =&gt; { this.visible = false }, 500) } } } &lt;/script&gt; &lt;style lang=&quot;less&quot;&gt; .m-toast { display: flex; justify-content: center; align-items: center; position: fixed; width: 100%; left: 0; top: 40%; z-index: 99999; transition: opacity .5s; opacity: 0; &amp;.opacity{ opacity: 1; } p { position: relative; display: inline-block; background: rgba(252,93,123,.5); padding: 2% 4%; min-width: 20%; text-align: center; color: #FFF; line-height: 1.2; border-radius: .2rem; font-size: .28rem; max-width: 60%; line-height: .4rem; } } &lt;/style&gt; 2.æ’ä»¶éœ€è¦æœ‰installæ–¹æ³•toast.js import Toast from &#39;./index&#39; export default { install (Vue, options = {}) { const VueToast = Vue.extend(Toast) let toast = null function $toast (html, cb, time) { return new Promise(resolve =&gt; { if (!toast) { toast = new VueToast() toast.$mount() document.querySelector(options.container || &#39;body&#39;).appendChild(toast.$el) } toast.show(html, cb, time) resolve() }) } Vue.prototype.$toast = $toast } } å…¨å±€ä½¿ç”¨ this.$toast(&#39;ä»Šæ—¥è¾“é€èƒ½é‡ä»»åŠ¡å·²å®Œæˆæ˜å¤©å†æ¥å§~&#39;)","categories":[],"tags":[]},{"title":"syncä½¿ç”¨","slug":"syncä½¿ç”¨","date":"2019-06-19T07:21:41.000Z","updated":"2019-06-19T08:44:14.577Z","comments":true,"path":"2019/06/19/syncä½¿ç”¨/","link":"","permalink":"https://github.com/lifenglei/2019/06/19/syncä½¿ç”¨/","excerpt":"","text":"Syncçš„ä½¿ç”¨ åœ¨ä¸€äº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šéœ€è¦å¯¹ä¸€ä¸ª prop è¿›è¡Œã€åŒå‘ç»‘å®šã€ã€‚äº‹å®ä¸Šï¼Œè¿™æ­£æ˜¯ Vue 1.x ä¸­çš„ .sync ä¿®é¥°ç¬¦æ‰€æä¾›çš„åŠŸèƒ½ã€‚å½“ä¸€ä¸ªå­ç»„ä»¶æ”¹å˜äº†ä¸€ä¸ª prop çš„å€¼æ—¶ï¼Œè¿™ä¸ªå˜åŒ–ä¹Ÿä¼šåŒæ­¥åˆ°çˆ¶ç»„ä»¶ä¸­æ‰€ç»‘å®šçš„å€¼ã€‚è¿™å¾ˆæ–¹ä¾¿ï¼Œä½†ä¹Ÿä¼šå¯¼è‡´é—®é¢˜ï¼Œå› ä¸ºå®ƒç ´åäº†ã€å•å‘æ•°æ®æµã€çš„å‡è®¾ã€‚ç”±äºå­ç»„ä»¶æ”¹å˜ prop çš„ä»£ç å’Œæ™®é€šçš„çŠ¶æ€æ”¹åŠ¨ä»£ç æ¯«æ— åŒºåˆ«ï¼Œå½“å…‰çœ‹å­ç»„ä»¶çš„ä»£ç æ—¶ï¼Œä½ å®Œå…¨ä¸çŸ¥é“å®ƒä½•æ—¶æ‚„æ‚„åœ°æ”¹å˜äº†çˆ¶ç»„ä»¶çš„çŠ¶æ€ã€‚è¿™åœ¨ debug å¤æ‚ç»“æ„çš„åº”ç”¨æ—¶ä¼šå¸¦æ¥å¾ˆé«˜çš„ç»´æŠ¤æˆæœ¬ã€‚ åœ¨2.0å‘å¸ƒä¸€æ®µä¹‹åï¼Œæ— è®ºåœ¨ä¸šåŠ¡ç»„ä»¶è¿˜æ˜¯åœ¨åŠŸèƒ½ç»„ä»¶åº“ä¸Šé¢çš„ï¼Œå¤§é‡çš„å­ç»„ä»¶æ”¹å˜çˆ¶å­ç»„ä»¶çš„æ•°æ®å’Œç»„ä»¶åº“ä¸­å¯èƒ½è¾¾åˆ°å¤§åŠŸç‡çš„å¤ç”¨ï¼Œä½†æ˜¯åœ¨2.3ä¸­å›å½’ï¼Œé‡æ–°å¼•å…¥äº† .sync ä¿®é¥°ç¬¦ï¼Œè¿™æ¬¡å®ƒåªæ˜¯ä½œä¸ºä¸€ä¸ªç¼–è¯‘æ—¶çš„è¯­æ³•ç³–å­˜åœ¨ã€‚å®ƒä¼šè¢«æ‰©å±•ä¸ºä¸€ä¸ªè‡ªåŠ¨æ›´æ–°çˆ¶ç»„ä»¶å±æ€§çš„ v-on ä¾¦å¬å™¨ã€‚ä¹‹å‰çš„ä¾‹å­ä¸­ï¼Œv-model æ¯•ç«Ÿä¸æ˜¯ç»™ç»„ä»¶ä¸ç»„ä»¶ä¹‹é—´é€šä¿¡è€Œè®¾è®¡çš„åŒå‘ç»‘å®šï¼Œæ— è®ºä»è¯­æ„ä¸Šå’Œä»£ç å†™æ³•ä¸Šéƒ½æ²¡æœ‰ .sync ç›´è§‚å’Œæ–¹ä¾¿ã€‚æ— è®ºä» v-model è¿˜æ˜¯ .sync ä¿®é¥°ç¬¦æ¥çœ‹ï¼Œéƒ½ç¦»ä¸å¼€ $emit v-on è¯­æ³•ç³–çš„å°è£…ï¼Œä¸»è¦ç›®çš„è¿˜æ˜¯ä¸ºäº†ä¿è¯æ•°æ®çš„æ­£ç¡®å•å‘æµåŠ¨ä¸æ˜¾ç¤ºæµåŠ¨ã€‚ &lt;demo :foo.sync=&quot;something&quot;&gt;&lt;/demo&gt; è¯­æ³•ç³–çš„æ‰©å±•&lt;demo :foo=&quot;something&quot; @update:foo=&quot;val =&gt; something = val&quot;&gt;&lt;/demo&gt; è§£æ foo åˆ™æ˜¯ demo å­ç»„ä»¶éœ€è¦ä»çˆ¶ç»„ä»¶ props æ¥æ”¶çš„æ•°æ® é€šè¿‡äº‹ä»¶æ˜¾ç¤ºç›‘å¬ update:foo (fooåˆ™æ˜¯ props æ˜¾ç¤ºç›‘å¬çš„æ•°æ®)ï¼Œé€šè¿‡ç®­å¤´å‡½æ•°æ‰§è¡Œå›è°ƒï¼ŒæŠŠå‚æ•°ä¼ ç»™ somethingï¼Œåˆ™å°±å½¢æˆäº†ä¸€ç§åŒå‘ç»‘å®šçš„å¾ªç¯é“¾æ¡ å½“å­ç»„ä»¶éœ€è¦æ›´æ–° foo çš„å€¼æ—¶ï¼Œå®ƒéœ€è¦æ˜¾å¼åœ°è§¦å‘ä¸€ä¸ªæ›´æ–°äº‹ä»¶ï¼šthis.$emit(â€˜update:fooâ€™, newValue)åŒæ—¶çˆ¶ç»„ä»¶@update:fooä¹Ÿæ˜¯ä¾èµ–äºå­ç»„ä»¶çš„æ˜¾ç¤ºè§¦å‘ï¼Œè¿™æ ·å°±å¯ä»¥å¾ˆè½»æ¾çš„æ•æ‰åˆ°äº†æ•°æ®çš„æ­£ç¡®çš„æµåŠ¨ã€‚ç¬¬ä¸€ä¸ªå‚æ•°åˆ™æ˜¯ update æ˜¾ç¤ºæ›´æ–°çš„äº‹ä»¶ï¼Œè·Ÿåœ¨åé¢çš„ï¼šfooåˆ™æ˜¯éœ€è¦æ”¹å˜å¯¹åº”çš„propså€¼ã€‚ç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥çš„æ˜¯ä½ å¸Œæœ›çˆ¶ç»„ä»¶fooæ•°æ®é‡Œå°†è¦å˜åŒ–çš„å€¼ï¼Œä»¥ç”¨äºçˆ¶ç»„ä»¶æ¥æ”¶updateæ—¶æ›´æ–°æ•°æ®ã€‚ å­ç»„ä»¶&lt;template&gt; &lt;div v-show=&quot;show&quot;&gt; &lt;p&gt;è¿™æ˜¯ä¸€ä¸ªModelæ¡†&lt;/p&gt; &lt;button @click=&quot;closeModel&quot;&gt;å…³é—­model&lt;/button&gt; &lt;/div&gt; &lt;/template&gt; &lt;script&gt; export default { props: [&#39;show&#39;], methods: { closeModel () { this.$emit(&#39;update:show&#39;,false) } } } &lt;/script&gt; çˆ¶ç»„ä»¶&lt;template&gt; &lt;div class=&quot;hello&quot;&gt; &lt;button @click=&quot;show=true&quot;&gt;æ‰“å¼€model&lt;/button&gt; &lt;demo :show.sync=&quot;show&quot; &gt;&lt;/demo&gt; &lt;/div&gt; &lt;/template&gt; &lt;script&gt; import Demo from &#39;./Demo.vue&#39; export default { name: &#39;hello&#39;, components: { Demo }, data () { return { show: false } } } &lt;/script&gt; ä¸Šé¢çš„ case åŒæ ·ä¹Ÿè§£å†³äº† model æ˜¾ç¤ºäº¤äº’æ“ä½œï¼Œä»ä»£ç çš„è¯­æ„ä¸Šçœ‹ä¸Šå»è®©å¼€å‘è€…ä¸€ç›®äº†ç„¶ï¼ŒåŒæ ·ä¹Ÿåšäº† v-model åšä¸äº†çš„äº‹ï¼ŒåŸºäº props çš„åŸå­åŒ–ï¼Œå¯¹ä¼ å…¥çš„ props è¿›è¡Œå¤šä¸ªæ•°æ®åŒå‘ç»‘å®š.sync ä¹Ÿèƒ½è½»æ¾åšåˆ°ã€‚çˆ¶ç»„ä»¶ &lt;template&gt; &lt;div class=&quot;hello&quot;&gt; &lt;button @click=&quot;show=true&quot;&gt;æ‰“å¼€model&lt;/button&gt; &lt;demo :show.sync=&quot;show&quot; :msg.sync=&quot;msg&quot;&gt;&lt;/demo&gt; &lt;/div&gt; &lt;/template&gt; &lt;script&gt; import Demo from &#39;./Demo.vue&#39; export default { name: &#39;hello&#39;, components: { Demo }, data () { return { show: false, msg: &#39;è¿™æ˜¯ä¸€ä¸ªmodel&#39; } } } &lt;/script&gt; å­ç»„ä»¶&lt;template&gt; &lt;div v-show=&quot;show&quot;&gt; &lt;p&gt;{{msg}}&lt;/p&gt; &lt;button @click=&quot;closeModel&quot;&gt;å…³é—­model&lt;/button&gt; &lt;button @click=&quot;$emit(&#39;update:msg&#39;,&#39;æ”¹å˜äº†modelæ–‡æ¡ˆ&#39;)&quot;&gt;æ”¹å˜æ–‡æ¡ˆ&lt;/button&gt; &lt;/div&gt; &lt;/template&gt; &lt;script&gt; export default { props: [&#39;show&#39;, &#39;msg&#39;], methods: { closeModel () { this.$emit(&#39;update:show&#39;,false) } } } &lt;/script&gt; warn å­ç»„ä»¶æ”¹å˜çˆ¶ç»„ä»¶çš„æ•°æ®æ—¶ï¼Œupdate å†’å·åé¢çš„å‚æ•°å’Œçˆ¶ç»„ä»¶ä¼ é€’è¿›æ¥çš„å€¼æ˜¯åŒæ­¥çš„ï¼Œæƒ³æ”¹å˜é‚£ä¸ªï¼Œåˆ™å†’å·åé¢çš„å€¼å¯¹åº”çš„é‚£ä¸ªï¼Œä¸¤è€…æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼ŒåŒæ—¶ä¹Ÿæ˜¯å¿…å¡«çš„ã€‚åŒæ ·è¿˜å¯ä»¥åœ¨ç»„ä»¶ template é‡Œç‚¹å‡»æ‰§è¡Œ click åä¸ä½†å¯ä»¥æ”¯æŒå›è°ƒå‡½æ•°ï¼Œè¿˜å¯ä»¥å†™å…¥è¡¨è¾¾å¼ï¼Œåªæ˜¯ä¸€ç§ç›´è§‚çš„è¡¨ç°è¿˜æ˜¯æ¨èè¿™ç§å†™æ³•çš„ã€‚.sync ä¿®é¥°ç¬¦ç»™æˆ‘ä»¬å¼€å‘ä¸­å¸¦æ¥äº†å¾ˆå¤§çš„æ–¹ä¾¿ï¼ŒåŒæ—¶åœ¨2.0çš„åˆæœŸçš„ç»„ä»¶åº“ä¸­å¤§é‡çš„ v-model ç»™å¼€å‘è€…ç”¨èµ·æ¥è¿˜æ˜¯å¾ˆåˆ«æ‰­ï¼Œåœ¨.sync å›å½’ååŒæ—¶ä¹Ÿä¼šæ…¢æ…¢å‘.sync è¿›è¡Œä¸€ä¸ªç‰ˆæœ¬çš„è¿ç§»ã€‚ ENDâ€” ä¸‹ä¸€æ¬¡åˆ†äº«$attrs $listenersä½¿ç”¨","categories":[],"tags":[]},{"title":"$atträ½¿ç”¨","slug":"ï¿½ï¿½ä½¿ç”¨","date":"2019-06-19T07:20:23.000Z","updated":"2019-06-19T08:35:19.148Z","comments":true,"path":"2019/06/19/ï¿½ï¿½ä½¿ç”¨/","link":"","permalink":"https://github.com/lifenglei/2019/06/19/ï¿½ï¿½ä½¿ç”¨/","excerpt":"","text":"$attrsä¸$listenrsä½¿ç”¨ 2.4.0 æ–°å¢ ç±»å‹ï¼š{ [key: string]: string } åªè¯» è¯¦ç»†: åŒ…å«äº†çˆ¶ä½œç”¨åŸŸä¸­ä¸ä½œä¸º prop è¢«è¯†åˆ« (ä¸”è·å–) çš„ç‰¹æ€§ç»‘å®š (class å’Œ style é™¤å¤–)ã€‚å½“ä¸€ä¸ªç»„ä»¶æ²¡æœ‰å£°æ˜ä»»ä½• prop æ—¶ï¼Œè¿™é‡Œä¼šåŒ…å«æ‰€æœ‰çˆ¶ä½œç”¨åŸŸçš„ç»‘å®š (class å’Œ style é™¤å¤–)ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ v-bind=â€$attrsâ€ ä¼ å…¥å†…éƒ¨ç»„ä»¶â€”â€”åœ¨åˆ›å»ºé«˜çº§åˆ«çš„ç»„ä»¶æ—¶éå¸¸æœ‰ç”¨ã€‚å®˜æ–¹è¯´æ³•ä¼¼ä¹æœ‰ç‚¹æ¨¡ç³Š å…¶å®å¯ä»¥è¿™ä¹ˆå»ç†è§£å› ä¸ºåœ¨é¡¹ç›®ä¸­æ·±å±‚æ¬¡ç»„ä»¶äº¤äº’çš„è¯å¯èƒ½å°±éœ€è¦ Vuex åŠ©åŠ›äº†ï¼Œä½†æ˜¯å¦‚æœåªæ˜¯ä¸€ä¸ªç®€å•çš„æ·±å±‚æ¬¡æ•°æ®ä¼ é€’ï¼Œ æˆ–è€…è¿›è¡ŒæŸç§äº¤äº’æ—¶éœ€è¦å‘ä¸Šé€šçŸ¥é¡¶å±‚æˆ–çˆ¶å±‚ç»„ä»¶æ•°æ®æ”¹å˜æ—¶ï¼Œå¤§æå°ç”¨Vuexå¯èƒ½æœªå…æœ‰ç‚¹å¤šä½™ï¼ $attr ä¸ interitAttrs ä¹‹é—´çš„å…³ç³»interitAttrsï¼š 2.4.0 æ–°å¢ ç±»å‹ï¼šboolean é»˜è®¤å€¼ï¼štrue è¯¦ç»†: é»˜è®¤æƒ…å†µä¸‹çˆ¶ä½œç”¨åŸŸçš„ä¸è¢«è®¤ä½œ props çš„ç‰¹æ€§ç»‘å®š (attribute bindings) å°†ä¼šâ€œå›é€€â€ä¸”ä½œä¸ºæ™®é€šçš„ HTML ç‰¹æ€§åº”ç”¨åœ¨å­ç»„ä»¶çš„æ ¹å…ƒç´ ä¸Šã€‚å½“æ’°å†™åŒ…è£¹ä¸€ä¸ªç›®æ ‡å…ƒç´ æˆ–å¦ä¸€ä¸ªç»„ä»¶çš„ç»„ä»¶æ—¶ï¼Œè¿™å¯èƒ½ä¸ä¼šæ€»æ˜¯ç¬¦åˆé¢„æœŸè¡Œä¸ºã€‚é€šè¿‡è®¾ç½® inheritAttrs åˆ° falseï¼Œè¿™äº›é»˜è®¤è¡Œä¸ºå°†ä¼šè¢«å»æ‰ã€‚è€Œé€šè¿‡ (åŒæ ·æ˜¯ 2.4 æ–°å¢çš„) å®ä¾‹å±æ€§ $attrs å¯ä»¥è®©è¿™äº›ç‰¹æ€§ç”Ÿæ•ˆï¼Œä¸”å¯ä»¥é€šè¿‡ v-bind æ˜¾æ€§çš„ç»‘å®šåˆ°éæ ¹å…ƒç´ ä¸Šã€‚warnï¼šè¿™ä¸ªé€‰é¡¹ä¸å½±å“ class å’Œ style ç»‘å®šã€‚ä¸‹é¢é€šè¿‡ç®€å•demoè§£é‡Šä¸‹çˆ¶ç»„ä»¶ &lt;template&gt; &lt;div class=&quot;hello&quot;&gt; &lt;demo :count=&quot;count&quot; :num=&quot;num&quot;&gt;&lt;/demo&gt; &lt;/div&gt; &lt;/template&gt; &lt;script&gt; import Demo from &#39;./demo.vue&#39; export default { name: &#39;hello&#39;, components: { Demo }, data () { return { count: &#39;count message&#39;, num: &#39;num message&#39; } }, } &lt;/script&gt; å­ç»„ä»¶ &lt;template&gt; &lt;div&gt; {{count}} &lt;/div&gt; &lt;/template&gt; &lt;script&gt; export default { name: &#39;demo&#39;, props: [&#39;count&#39;] } &lt;/script&gt; çˆ¶ç»„ä»¶åœ¨å­ç»„ä»¶ä¸­è¿›è¡Œä¼ é€’ count å’Œnum ä¸¤ä¸ªæ•°æ®ï¼Œåœ¨å­ç»„ä»¶ä¸­ï¼Œåº”è¯¥æœ‰ç›¸å¯¹åº”çš„ props å®šä¹‰çš„æ¥æ”¶ç‚¹ï¼Œå¦‚æœåœ¨ props ä¸­å®šä¹‰äº†ï¼Œä½ ä¼šå‘ç°æ— è®ºæ˜¯ count å’Œ num éƒ½æˆäº†å­ç»„ä»¶çš„æ¥æ”¶æ¥çš„æ•°æ®äº†ï¼Œå¯ä»¥ç”¨æ¥è¿›è¡Œæ•°æ®å±•ç¤ºå’Œè¡Œä¸ºæ“ä½œã€‚è™½ç„¶åœ¨çˆ¶ç»„ä»¶ä¸­åœ¨å­ç»„ä»¶æ¨¡ç‰ˆä¸Šé€šè¿‡ props å®šä¹‰äº†ä¸¤ä¸ªæ•°æ®ï¼Œä½†æ˜¯å­ç»„ä»¶ä¸­çš„ props åªæ¥æ”¶äº†ä¸€ä¸ªï¼Œåªæ¥æ”¶äº† countï¼Œå¹¶æ²¡æœ‰æ¥æ”¶ numï¼Œæ²¡æœ‰è¿›è¡Œæ¥æ”¶çš„æ­¤æ—¶å°±ä¼šæˆä¸ºå­ç»„ä»¶æ ¹æ— ç´ çš„å±æ€§èŠ‚ç‚¹ã€‚ interitAttrs = false å‘ç”Ÿäº†ä»€ä¹ˆ ï¼Ÿå­ç»„ä»¶ &lt;template&gt; &lt;div&gt; {{count}} &lt;/div&gt; &lt;/template&gt; &lt;script&gt; export default { name: &#39;demo&#39;, props: [&#39;count&#39;], interitAttrs:false } &lt;/script&gt; å¯¹å­ç»„ä»¶è¿›è¡Œä¸€ä¸ªæ”¹åŠ¨ï¼Œæˆ‘ä»¬åŠ ä¸Š inheritAttrs: falseï¼Œä»å­—é¢ä¸Šçš„ç¿»è¯‘çš„æ„æ€ï¼Œå–æ¶ˆç»§æ‰¿çš„å±æ€§ï¼Œç„¶è€Œ props é‡Œä»ç„¶æ²¡æœ‰æ¥æ”¶ numï¼Œå‘ç°å°±ç®— props é‡Œæ²¡æœ‰æ¥æ”¶ numï¼Œåœ¨å­ç»„ä»¶çš„æ ¹å…ƒç´ ä¸Šå¹¶æ²¡æœ‰ç»‘å®šä»»ä½•å±æ€§ã€‚ $attrs åœ¨å‰é¢çš„ä¾‹å­ä¸­ï¼Œå­ç»„ä»¶propsä¸­å¹¶æ²¡æœ‰æ¥å—numï¼Œè®¾ç½®é€‰é¡¹ inheritAttrsï¼š falseï¼ŒåŒæ ·ä¹Ÿä¸ä¼šä½œä¸ºæ ¹å…ƒç´ çš„å±æ€§èŠ‚ç‚¹ï¼Œæ•´ä¸ªæ²¡æœ‰æ¥æ”¶çš„æ•°æ®éƒ½è¢« $attr å®ä¾‹å±æ€§ç»™æ¥æ”¶ï¼Œé‡Œé¢åŒ…å«ç€æ‰€æœ‰çˆ¶ç»„ä»¶ä¼ å…¥è€Œå­ç»„ä»¶å¹¶æ²¡æœ‰åœ¨ Propsé‡Œæ˜¾ç¤ºæ¥æ”¶çš„æ•°æ®ã€‚ ä¸ºäº†éªŒè¯äº‹å®ï¼Œå¯ä»¥åœ¨å­ç»„ä»¶ä¸­åŠ ä¸Š created () { console.log(this.$attrs) } æ‰“å°å‡ºæ¥åˆ™æ˜¯ä¸€ä¸ªå¯¹è±¡ {num: â€œnum messageâ€} warnæƒ³è¦é€š $attr æ¥æ”¶ï¼Œä½†å¿…é¡»è¦ä¿è¯è®¾ç½®é€‰é¡¹ inheritAttrs: falseï¼Œä¸ç„¶ä¼šé»˜è®¤å˜æˆæ ¹å…ƒç´ çš„å±æ€§èŠ‚ç‚¹ã€‚å¼€å¤´è¯´äº†ï¼Œæœ€æœ‰ç”¨çš„æƒ…å†µåˆ™æ˜¯åœ¨æ·±å±‚æ¬¡ç»„ä»¶è¿ç”¨çš„æ—¶å€™ï¼Œåˆ›å»ºç¬¬ä¸‰å±‚å­™å­ç»„ä»¶ï¼Œä½œä¸ºç¬¬äºŒå±‚çˆ¶ç»„ä»¶çš„å­ç»„ä»¶ï¼Œåœ¨å­ç»„ä»¶å¼•å…¥çš„å­™å­ç»„ä»¶ï¼Œåœ¨æ¨¡ç‰ˆä¸ŠæŠŠæ•´ä¸ª $attr å½“æ•°ä½œæ•°æ®ä¼ é€’ä¸‹å»ï¼Œä¸­é—´åˆ™å¹¶ä¸ç”¨é€šè¿‡ä»»ä½•æ–¹æ³•å»æ‰‹åŠ¨è½¬æ¢æ•°æ®ã€‚å­ç»„ä»¶ &lt;template&gt; &lt;div&gt; &lt;next-demo v-bind=&quot;$attrs&quot;&gt;&lt;/next-demo&gt; &lt;/div&gt; &lt;/template&gt; &lt;script&gt; import nextDemo from &#39;./nextdemo.vue&#39; export default { name: &#39;demo&#39;, components: { nextDemo }, created () { console.log(this.$attrs) } } &lt;/script&gt; å­™å­ç»„ä»¶ &lt;template&gt; &lt;div&gt; {{count}}{{num}} &lt;/div&gt; &lt;/template&gt; &lt;script&gt; export default { props : [ &#39;count&#39; , &#39;num&#39;] } &lt;/script&gt; å­™å­ç»„ä»¶åœ¨ props æ¥æ”¶å­ç»„ä»¶ä¸­é€šè¿‡ $attrs åŒ…è£¹ä¼ æ¥çš„æ•°æ®ï¼ŒåŒæ ·æ˜¯é€šè¿‡çˆ¶ç»„ä»¶ä¼ æ¥çš„æ•°æ®ï¼Œåªæ˜¯åœ¨å­ç»„ä»¶ç”¨äº†$attrsè¿›è¡Œäº†ç»Ÿä¸€æ¥æ”¶ï¼Œå†å¾€ä¸‹ä¼ é€’ï¼Œæœ€åé€šè¿‡å­™å­ç»„ä»¶è¿›è¡Œæ¥æ”¶ã€‚ä»¥æ­¤ç±»æ¨å­™å­ç»„ä»¶ä»ç„¶ä¸æƒ³æ¥æ”¶ï¼Œå†ä¼ å…¥ä¸‹çº§ç»„ä»¶ï¼Œæˆ‘ä»¬ä»ç„¶éœ€è¦å¯¹å­™å­ç»„ä»¶å®åŠ›é€‰é¡¹è¿›è¡Œè®¾ç½®é€‰é¡¹ inheritAttrs: falseï¼Œå¦åˆ™ä»ç„¶ä¼šæˆä¸ºå­™å­ç»„ä»¶æ ¹å…ƒç´ çš„å±æ€§èŠ‚ç‚¹ã€‚ ä»è€Œåˆ©ç”¨ $attrs æ¥æ¥æ”¶ props ä¸ºæ¥æ”¶çš„æ•°æ®å†æ¬¡å‘ä¸‹ä¼ é€’æ˜¯ä¸€ä»¶å¾ˆæ–¹ä¾¿çš„äº‹ä»¶ï¼Œæ·±å±‚æ¬¡æ¥æ”¶æ•°æ®æˆ‘ä»¬ç†è§£äº†ï¼Œé‚£ä»æ·±å±‚æ¬¡å‘å±‚è¯·æ±‚æ”¹å˜æ•°æ®å¦‚ä½•å®ç°ã€‚æ„æ€å°±æ˜¯è®©é¡¶å±‚æ•°æ®å’Œæœ€åº•å±‚æ•°æ®è¿›è¡Œä¸€ä¸ªåŒå‘ç»‘å®šã€‚$listeners 2.4.0 æ–°å¢ ç±»å‹ï¼š{ [key: string]: Function | Array } åªè¯» è¯¦ç»†: åŒ…å«äº†çˆ¶ä½œç”¨åŸŸä¸­çš„ (ä¸å« .native ä¿®é¥°å™¨çš„) v-on äº‹ä»¶ç›‘å¬å™¨ã€‚å®ƒå¯ä»¥é€šè¿‡ v-on=&quot;$listeners&quot; ä¼ å…¥å†…éƒ¨ç»„ä»¶â€”â€”åœ¨åˆ›å»ºæ›´é«˜å±‚æ¬¡çš„ç»„ä»¶æ—¶éå¸¸æœ‰ç”¨ã€‚ $listeners å’Œ $attrs ä¸¤è€…è¡¨é¢å±‚éƒ½æ˜¯ä¸€ä¸ªæ„æ€ï¼Œ$attrs æ˜¯å‘ä¸‹ä¼ é€’æ•°æ®ï¼Œ$listeners æ˜¯å‘ä¸‹ä¼ é€’æ–¹æ³•ï¼Œé€šè¿‡æ‰‹åŠ¨å»è°ƒç”¨ $listeners å¯¹è±¡é‡Œçš„æ–¹æ³•ï¼ŒåŸç†å°±æ˜¯ $emit ç›‘å¬äº‹ä»¶ï¼Œ$listeners ä¹Ÿå¯ä»¥çœ‹æˆä¸€ä¸ªåŒ…è£¹ç›‘å¬äº‹ä»¶çš„ä¸€ä¸ªå¯¹è±¡ã€‚ çˆ¶ç»„ä»¶ ``` js &lt;template&gt; &lt;div class=&quot;hello&quot;&gt; {{firstMsg}} &lt;demo v-on:changeData=&quot;changeData&quot; v-on:another = &#39;another&#39;&gt;&lt;/demo&gt; &lt;/div&gt; &lt;/template&gt; &lt;script&gt; import Demo from &#39;./demo.vue&#39; export default { name: &#39;hello&#39;, components: { Demo }, data () { return { firstMsg: &#39;çˆ¶ç»„ä»¶&#39;, } }, methods: { changeData (params) { this.firstMsg = params }, another () { alert(2) } } } &lt;/script&gt; ``` å­ç»„ä»¶ ```js &lt;template&gt; &lt;div&gt; &lt;p @click=&quot;$emit(&#39;another&#39;)&quot;&gt;å­ç»„ä»¶&lt;/p&gt; &lt;next-demo v-on=&#39;$listeners&#39;&gt;&lt;/next-demo&gt; &lt;/div&gt; &lt;/template&gt; &lt;script&gt; import NextDemo from &#39;./nextdemo.vue&#39; export default { name: &#39;demo&#39;, components: { NextDemo }, created () { console.log(this.$listeners) }, } &lt;/script&gt; ``` å­™å­ç»„ä»¶ ```js &lt;template&gt; &lt;div class=&quot;hello&quot;&gt; &lt;p @click=&#39;$listeners.changeData(&quot;change&quot;)&#39;&gt;å­™å­ç»„ä»¶&lt;/p&gt; &lt;/div&gt; &lt;/template&gt; &lt;script&gt; export default { name: &#39;demo&#39;, created () { console.log(this.$listeners) }, } &lt;/script&gt; ``` ä¾ç„¶èƒ½æ‹¿åˆ°ä»å­ç»„ä¸­ä¼ é€’è¿‡æ¥çš„$listenersæ‰€æœ‰çš„ç›‘å¬äº‹ä»¶ï¼Œæ­¤æ—¶å¹¶ä¸æ˜¯é€šè¿‡$emitå»è§¦å‘ï¼Œè€Œæ˜¯åƒè°ƒç”¨å‡½æ•°ä¸€æ ·ï¼Œ$emitåªæ˜¯é’ˆå¯¹äºçˆ¶å­ç»„ä»¶çš„åŒå‘é€šä¿¡ï¼Œ$listenersåŒ…äº†ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ†åˆ«æ˜¯ changeData å’Œ anotherï¼Œé€šè¿‡$listeners.changeData(â€˜changeâ€™)ç­‰äºç›´æ¥è§¦å‘äº†äº‹ä»¶ï¼Œæ‰§è¡Œç›‘å¬åçš„å›è°ƒå‡½æ•°ï¼Œå°±æ˜¯é€šè¿‡å‡½æ•°çš„ä¼ é€’ï¼Œè°ƒç”¨äº†çˆ¶ç»„ä»¶çš„å‡½æ•°ã€‚é€šè¿‡ $attrs å’Œ $listeners å¯ä»¥å¾ˆæ„‰å¿«åœ°è§£å†³æ·±å±‚æ¬¡ç»„ä»¶çš„é€šä¿¡é—®é¢˜ï¼Œæ›´åŠ åˆç†çš„ç»„ç»‡ä½ çš„ä»£ç ã€‚ END â€”ä¸‹æ¬¡åˆ†äº«$parent $childrenä½¿ç”¨","categories":[],"tags":[]},{"title":"vModelè¯­æ³•ç³–","slug":"vModelè¯­æ³•ç³–","date":"2019-06-19T07:18:34.000Z","updated":"2019-06-19T08:32:34.163Z","comments":true,"path":"2019/06/19/vModelè¯­æ³•ç³–/","link":"","permalink":"https://github.com/lifenglei/2019/06/19/vModelè¯­æ³•ç³–/","excerpt":"","text":"v-modelè¯­æ³•ç³– ä»€ä¹ˆæ˜¯v-modelè¯­æ³•ç³– å¦‚ä½•å»ç†è§£è¿™ä¸ªè¯­æ³•ç³– v-model å…¶å®ä¹Ÿæ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œæƒ³è¦ç†è§£è¯­æ³•ç³–ï¼Œä½ é¦–å…ˆè¦çŸ¥é“Inputå…ƒç´ ä¸Šæœ¬èº«æœ‰ä¸ª oninputäº‹ä»¶ï¼Œè¿™æ˜¯HTML5æ–°å¢åŠ çš„ï¼Œç±»ä¼¼onchangeï¼Œæ¯å½“è¾“å…¥æ¡†å†…å®¹å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œå°±ä¼šè§¦å‘è¿™ä¸ªäº‹ä»¶ï¼Œç„¶åæŠŠ Input è¾“å…¥æ¡†ä¸­value å€¼å†æ¬¡ä¼ é€’ç»™ newValueã€‚æ­¤æ—¶ value è¿ç”¨åœ¨ä¸€ä¸ª Input å…ƒç´ ä¸Šï¼Œç”¨ï¼šv-bind:value=â€™newValueâ€™ï¼Œæ„ä¹‰ä¸Šé¢åªæ˜¯æŠŠInput è¾“å…¥æ¡†ä¸­çš„ value å€¼ä¸ newValue ä½œä¸ºä¸€ä¸€å¯¹åº”çš„åŒå‘ç»‘å®šï¼Œè¿™å°±åƒä¸€ä¸ªå¾ªç¯æ“ä½œï¼Œå½“å†æ¬¡è§¦å‘ Input äº‹ä»¶æ—¶ï¼Œinput($event.target)å¯¹è±¡ä¸­çš„valueå€¼ä¼šå†æ¬¡æ”¹å˜newValueã€‚è¿™é‡Œæˆ‘ä»¬å¯¹ v-model ç»‘å®šåœ¨ Input å…ƒç´ ä¸Šè¿›è¡Œè¯­æ³•ç³–ä¸Šçš„è§£æã€‚ åœ¨ç»„ä»¶ä¸­ä½¿ç”¨çš„æ—¶å€™ å®ƒç›¸å½“äº&lt;custom-input&gt; v-bind:value=&quot;newValue&quot; v-on:input = &quot;newValue = argument[0]&quot; &lt;/custom-input&gt; é€šè¿‡ä»¥ä¸Šç®€å†™,é€šè¿‡è‡ªå®šä¹‰äº‹ä»¶å®ç°çˆ¶å­æ•°æ®åŒå‘ç»‘å®šv-bind:value=&#39;newValue&#39; æ­¤æ—¶ value æ˜¯ä½œä¸ºå­ç»„ä»¶æ¥æ”¶çš„ Props æ¥æ”¶çš„åªèƒ½æ˜¯ value å—ï¼Ÿå¿…é¡»æ˜¯ï¼Œå› ä¸º v-model æ˜¯åŸºäº Input è¾“å…¥æ¡†å®šåˆ¶çš„ï¼Œå…¶ä¸­value å€¼æ˜¯ä¸º Input å†…éƒ¨å®šåˆ¶çš„v-on:input=&quot;newValue = arguments[0]&quot; æ­¤æ—¶ä½œç”¨åœ¨ç»„ä»¶ä¸Šæ—¶ï¼Œv-on ç›‘å¬çš„è¯­æ³•ç³–ä¹Ÿä¼šæœ‰æ‰€æ”¹åŠ¨ï¼Œç›‘å¬çš„å¹¶ä¸æ˜¯$event.target.valueï¼Œè€Œæ˜¯å›è°ƒå‡½æ•°ä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•°çˆ¶ç»„ä»¶&lt;template&gt; &lt;div class=&quot;hello&quot;&gt; &lt;button @click=&quot;show=true&quot;&gt;æ‰“å¼€model&lt;/button&gt; &lt;demo v-model=&quot;show&quot;&gt;&lt;/demo&gt; &lt;/div&gt; &lt;/template&gt; &lt;script&gt; import Demo from &#39;./Demo.vue&#39; export default { name: &#39;hello&#39;, components: { Demo }, data () { return { show: false } } } å­ç»„ä»¶&lt;template&gt; &lt;div v-show=&quot;value&quot;&gt; &lt;div&gt; &lt;p&gt;è¿™æ˜¯ä¸€ä¸ªModelæ¡†&lt;/p&gt; &lt;button @click=&quot;close&quot;&gt;å…³é—­model&lt;/button&gt; &lt;/div&gt; &lt;/div&gt; &lt;/template&gt; &lt;script&gt; export default { props: [&#39;value&#39;], methods: { close () { this.$emit(&#39;input&#39;,false) } } } &lt;/script&gt; è¿™æ˜¯ä¸€ä¸ªæ¨¡æ€æ¡†çš„åŸºæœ¬é›å½¢ï¼Œå¯ä»¥åœ¨çˆ¶ç»„ä»¶é€šè¿‡ v-model æ¥è¿›è¡Œ model æ¡†å’Œçˆ¶ç»„ä»¶ä¹‹é—´çš„æ˜¾ç¤ºäº¤äº’ã€‚é€šè¿‡å­ç»„ä»¶çœ‹å‡ºé€šè¿‡propsæ¥æ”¶äº†valueå€¼ï¼Œå½“ç‚¹å‡»å…³é—­çš„æ—¶å€™è¿˜æ˜¯é€šè¿‡$emitäº‹ä»¶è§¦å‘inputäº‹ä»¶ï¼Œç„¶åé€šè¿‡ä¼ å…¥ false å‚æ•°ã€‚ çˆ¶ç»„ä»¶éšå¼ v-on:input=â€something = arguments[0]â€ è¿›è¡Œäº†ç›‘å¬ï¼Œä¸€ä½† Input äº‹ä»¶è§¦å‘ï¼Œçˆ¶ç»„ä»¶å°±ä¼šæ‰§è¡Œç›‘å¬å›è°ƒï¼Œä»è€Œåšåˆ°äº†åŒå‘ç»‘å®šã€‚ å®šåˆ¶ç»„ä»¶ v-model çˆ¶ç»„ä»¶å®šåˆ¶ç»„ä»¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥é‡å†™v-modelé‡Œçš„Props å’Œ eventï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œä¸€ä¸ªç»„ä»¶çš„ v-model ä¼šä½¿ç”¨ value å±æ€§å’Œ input äº‹ä»¶ï¼Œå¾€å¾€æœ‰äº›æ—¶å€™ï¼Œvalue å€¼è¢«å ç”¨äº†ï¼Œæˆ–è€…è¡¨å•çš„å’Œè‡ªå®šä¹‰v-modelçš„$emit(â€˜inputâ€™)äº‹ä»¶å‘ç”Ÿå†²çªï¼Œä¸ºäº†é¿å…è¿™ç§å†²çªï¼Œå¯ä»¥å®šåˆ¶ç»„ä»¶ v-modelï¼Œå†²çªç¤ºä¾‹ã€‚å­ç»„ä»¶&lt;template&gt; &lt;div v-show=&quot;value&quot;&gt; &lt;div&gt; &lt;p&gt;è¿™æ˜¯ä¸€ä¸ªModelæ¡†&lt;/p&gt; &lt;input type=&quot;text&quot; v-model=&quot;value&quot;&gt; {{value}} &lt;button @click=&quot;close&quot;&gt;å…³é—­model&lt;/button&gt; &lt;/div&gt; &lt;/div&gt; &lt;/template&gt; &lt;script&gt; export default { props: [&#39;value&#39;], methods: { close () { this.$emit(&#39;input&#39;,false) } } } &lt;/script&gt; çˆ¶ç»„ä»¶&lt;template&gt; &lt;div class=&quot;hello&quot;&gt; &lt;button @click=&quot;show=true&quot;&gt;æ‰“å¼€model&lt;/button&gt; &lt;demo v-model=&quot;show&quot;&gt;&lt;/demo&gt; &lt;/div&gt; &lt;/template&gt; &lt;script&gt; import Demo from &#39;./Demo.vue&#39; export default { name: &#39;hello&#39;, components: { Demo }, data () { return { show: false } } } &lt;/script&gt; ä¸Šé¢ä¾‹å­å¯ä»¥å‘ç°ï¼Œåœ¨å­ç»„ä»¶ä¸­inputä¸­v-modelå’Œmodelæ˜¾ç¤ºçš„æ“ä½œæ•°æ®å…±åŒå ç”¨çš„ propsä¸­çš„ï¼ˆvalueï¼‰ï¼ŒåŒæ ·ä¸¤è€…ä¹Ÿå…±åŒå ç”¨äº† emit(â€˜inputâ€™) è§¦å‘äº‹ä»¶ï¼ŒInput è¾“å…¥æ¡†çš„äº‹ä»¶æ˜¯è‡ªåŠ¨å‡ºå‘ï¼Œè€Œ modelæ˜¾ç¤ºæ¶ˆå¤±æ˜¯æ‰‹åŠ¨è§¦å‘ã€‚ åˆå§‹åŒ–çš„æ—¶å€™ï¼ŒInput è¾“å…¥æ¡†çš„å€¼çš„ä¼šè¢« value ä¼ å…¥çš„ false å€¼ç»™è‡ªåŠ¨åŠ ä¸Šï¼Œå½“æ”¹å˜ Inputè¾“å…¥æ¡†çš„æ—¶å€™ï¼Œå› ä¸ºå†²çªè€Œå¯¼è‡´æŠ¥é”™ã€‚ å®šåˆ¶ v-modelï¼Œ é€šè¿‡ model é€‰é¡¹æ”¹å˜ props å’Œ event çš„å€¼ï¼Œä»è€Œè§£é™¤ä¸¤è€…çš„å†²çªã€‚ propsä»£æ›¿æ‰åŸæœ¬ value çš„å€¼ï¼Œå¯ä»¥è‡ªå®šä¹‰å€¼ eventä»£è¡¨æ‰åŸæœ¬ input çš„è§¦å‘äº‹ä»¶ï¼Œå¯ä»¥è‡ªå®šä¹‰è§¦å‘äº‹ä»¶ å­ç»„ä»¶ &lt;template&gt; &lt;div v-show=&quot;show&quot;&gt; &lt;div&gt; &lt;p&gt;è¿™æ˜¯ä¸€ä¸ªModelæ¡†&lt;/p&gt; &lt;input type=&quot;text&quot; v-model=&quot;value&quot;&gt; {{value}} &lt;button @click=&quot;closeModel&quot;&gt;å…³é—­model&lt;/button&gt; &lt;/div&gt; &lt;/div&gt; &lt;/template&gt; &lt;script&gt; export default { model: { prop: &#39;show&#39;, event: &#39;close&#39; }, props: [&#39;show&#39;], data () { return { value: 10 } }, methods: { closeModel () { this.$emit(&#39;close&#39;,false) } } } &lt;/script&gt; é€šè¿‡ model é€‰é¡¹çš„æ”¹å˜ï¼ŒæŠŠ props ä»åŸæœ¬çš„valueæ¢æˆäº†showï¼Œinputè§¦å‘çš„äº‹ä»¶æ¢æˆäº†closeï¼Œä»è€Œä¸¤è€…éƒ½ä¸ç›¸äº’ä¾èµ–ï¼Œè§£å†³äº†å†²çªçš„é—®é¢˜ã€‚ æœ‰äº›æ—¶å€™é€šè¿‡çˆ¶ç»„ä»¶ä¸­çš„å­ç»„ä»¶æ¨¡æ¿ä¸­æƒ³ä¼ é€’value å€¼ï¼Œä¹Ÿä¼šå¯¼è‡´åŒæ ·çš„å†²çªã€‚ åœ¨ä¸ç”¨å®šåˆ¶ç»„ä»¶çš„æƒ…å†µä¸‹ï¼Œä»¥ä¸‹çš„å†™æ³•ï¼Œä¹Ÿä¼šåŒæ ·å¯¼è‡´å†²çªï¼Œå¯¼è‡´åŒç”¨ä¸€ä¸ª valueã€‚ props:[&#39;value&#39;] ENDâ€” ä¸‹ä¸€æ¬¡åˆ†äº« syncçš„ä½¿ç”¨ æ”¹å˜æ•°æ®æµå•å‘æµ","categories":[],"tags":[]},{"title":"å¦‚ä½•å¼€å‘ä¸€ä¸ªç™»å½•æ³¨å†Œç»„ä»¶","slug":"my-blog","date":"2018-08-10T09:12:13.000Z","updated":"2018-08-10T09:15:17.000Z","comments":true,"path":"2018/08/10/my-blog/","link":"","permalink":"https://github.com/lifenglei/2018/08/10/my-blog/","excerpt":"","text":"å¦‚ä½•å¼€å‘ä¸€ä¸ªç™»å½•æ³¨å†Œç»„ä»¶è¦å¼€å‘æŸä¸ªåŠŸèƒ½æˆ‘ä»¬å°±è¦å»æ€è€ƒè¿™ä¸ªåŠŸèƒ½æ€æ ·å®ç°æœ€å¿«æ·æœ€æ–¹ä¾¿ï¼Œä¸‹é¢ä»¥é¡¹ç›®ä¸­çš„ç™»å½•æ³¨å†Œç»„ä»¶ä¸ºä¾‹è¯´æ˜ ä¸€ä¸ªåŠŸèƒ½è¦å°½å¯èƒ½çš„å»æ‹†åˆ†æ¯”å¦‚è¿™ä¸ªç™»å½•æ³¨å†Œç»„ä»¶å°±å¯ä»¥æ‹†åˆ†æˆä¸‰ä¸ªéƒ¨åˆ†ä¸€ï¼šç™»å½•äºŒ ï¼šæ³¨å†Œä¸‰ï¼šå…¶ä»–ï¼ˆexample:æ‰¾å›å¯†ç ï¼‰ç»„ä»¶å¥½å†™ è¿™é‡Œå°±ä¸åœ¨å»å†™äº† ï¼ˆç»„ä»¶å°±æ˜¯å¯ä»¥é‡å¤åˆ©ç”¨çš„ç‰‡æ®µï¼‰è¿™é‡Œæˆ‘å…ˆæ¢³ç†æ€è·¯æˆ‘ä»¬è¦å†™ä¸€ä¸ªå…¨å±€æ–¹æ³• å¯ä»¥æ§åˆ¶å“ªä¸ªç»„ä»¶æ˜¾ç¤º ç±»ä¼¼äºè¿™æ ·this.setLogShow(n)é‡Œé¢å¯ä»¥æ˜¯Blooean æˆ–è€…Number æ¯”å¦‚ç™»é™†ç»„ä»¶è¦æ˜¾ç¤º å¯ä»¥ä¼ å…¥Number 1 ,æ³¨å†Œç»„ä»¶ä¸º2 ç­‰ä¸‹é¢æˆ‘ä»¬æ¥å®Œå–„è‡ªå·±çš„ä»“åº“(log.js)ä¸ºäº†èƒ½è®©ä½ å­¦åˆ°æ›´å¤šä¸œè¥¿æˆ‘é‡‡ç”¨æ‰‹åŠ¨å†™ä»£ç æ–¹å¼é¦–å…ˆè¦æ˜ç™½ä¸‹é¢å››ç‚¹ç¬¬ä¸€ï¼švueæ˜¯æ•°æ®é©±åŠ¨ æ•°æ®æ”¹å˜ä¼šä¼šæ›´æ–°è§†å›¾ æˆ‘ä»¬éœ€è¦æœ‰ä¸€ä¸ªåˆå§‹çŠ¶æ€å€¼ state;ç¬¬äºŒï¼š vueä¸­çš„æ•°æ®æ˜¯åŠ äº†é’©å­çš„ ä¸ç®¡æ˜¯get æˆ–è€…set éƒ½ä¼šè§¦å‘é’©å­ getteræ˜¯åœ¨æ˜¾ç¤ºæ•°æ®ä¹‹å‰è¿›è¡Œçš„åœ¨ç¼–è¾‘;ç¬¬ä¸‰ï¼šæ•°æ®çŠ¶æ€çš„æ”¹å˜åªèƒ½é€šè¿‡Mutations åŒæ­¥ä¿®æ”¹çŠ¶æ€;ç¬¬å››ï¼šActions å¼‚æ­¥ä¿®æ”¹çŠ¶æ€ ä¸”åªèƒ½æäº¤åˆ°Mutations;ç†è§£äº†ä¸Šé¢å››ç‚¹æˆ‘ä»¬å¼€å§‹æ„å»ºæˆ‘ä»¬çš„logInä»“åº“ä¸€ä¸‹ä»£ç å‡æŒ‰ç…§æ‰€åœ¨å…¬å¸è¦æ±‚ç¼–å†™é¦–å…ˆæˆ‘ä»¬éœ€è¦å®šä¹‰é¡¹ç›®å­˜åœ¨çš„äº‹ä»¶mutation-type.jsè®¾ç½®ç™»å½•çŠ¶æ€##### export const SET_LOGREG_SHOW = &#39;SET_LOGREG_SHOW&#39; æ¥ç€åœ¨ç¼–å†™ä¸€ä¸ªçŠ¶æ€ä»“åº“(logreg.js)import * as types from &#39;../mutations-types&#39;(ä¸ç†è§£import asçš„è‡ªè¡Œçœ‹es6æ¨¡å—ç« èŠ‚) const state ={ show: false //1:ç™»å½• 2ï¼šæ³¨å†Œ 3ï¼šæ‰¾å›å¯†ç  } const getters = { getLogregShow: state=&gt; state.show } const mutations = { [types.SET_ISLOGREGSHOW] (state,show){ state.show = show } } const actions = { setLogregShow({commit},showï¼‰{ commit(types.SET_ISLOGREGSHOWï¼Œshow) } } export default { state, getters, mutations, actions } æ³¨æ„ å…³äºä¸Šé¢ä»£ç ä¸€äº›å‘½å(æ¯”å¦‚gettersä¸‹é¢çš„getLogregShow,ä»¥åŠactionsä¸‹é¢çš„setLogregShow,),è¿™ä¸ªå‘½åå®Œå…¨çœ‹ä¸ªäººçˆ±å¥½,æˆ‘è§‰å¾—è¿™æ ·å†™èƒ½æ›´å¥½çš„è®©äººç†è§£getæ˜¯è·å–XXX,setæ˜¯è®¾ç½®XXX. æ¥ä¸‹æ¥ä¸ç”¨æˆ‘è¯´å¤§å®¶åº”è¯¥ä¹ŸçŸ¥é“è¦åœ¨storeä¸­å¯¼å…¥è¿™ä¸ªä»“åº“ ,å¹¶ä¸”åœ¨æ ¹ç»„ä»¶æ³¨å†Œä»“åº“æ‰èƒ½å…¨å±€ä½¿ç”¨ import Vue from &#39;vue&#39; import Vuex from &#39;vuex&#39; import logreg from &#39;./modules/logreg.js&#39; Vue.use(Vuex) export default new Vuex.Store({ modules:{ logreg } }) ç„¶åä½ çš„ä¸‰ä¸ªç»„ä»¶éƒ½å†™å¥½äº† é‚£ä¹ˆæ¥ä¸‹æ¥å°±è¦æ§åˆ¶æ¸²æŸ“å“ªä¸ªç»„ä»¶äº†æ¯”å¦‚ä½ çš„ä¸‰ä¸ªç»„ä»¶åˆ†åˆ«ä¸ºsignUp.vue signIn.vue retrieve.vueæ—¢ç„¶æ˜¯æ¸²æŸ“é‚£ä¹ˆæˆ‘ä»¬çŸ¥é“å¯ä»¥ç”¨v-if è‡ªè¡Œçœ‹v-ifä¸v-showçš„åŒºåˆ«æˆ‘ä»¬å¯ä»¥åšä¸€ä¸ªæ–°çš„ç»„ä»¶å°±å«åšsignComp.vue æ˜¯è¿™ä¸‰ä¸ªç»„ä»¶çš„çˆ¶ç»„ä»¶&lt;template&gt; &lt;div&gt; &lt;sign-in v-if=&quot;show===1&quot;&gt;&lt;/sign-in&gt; &lt;sign-up v-else-if=&quot;show===2&quot;&gt;&lt;/sign-up&gt; &lt;retrieve v-else-if=&quot;show===3&quot;&gt;&lt;/retrieve&gt; &lt;/div&gt; &lt;/template&gt; &lt;script&gt; import signIn from import signUp from import retrieve from components:{ signIn,signUp,retrieve } &lt;/script&gt; è¿™æ ·ä½ åœ¨å…¶ä»–è°ƒç”¨çš„æ—¶å€™åªéœ€è¦ä¸¤éƒ¨ æ˜ å°„æ–¹æ³• è°ƒç”¨æ–¹æ³•ç¬¬ä¸€ï¼šmapActions({ showLogreg:&#39;setLogregShow&#39; }) æ¯”å¦‚ç‚¹å‡»äº†ç™»å½•é‚£ä¹ˆ å¯ä»¥ç”¨ this.showLogreg(1) å°±ä¼šå¼¹å‡ºä½ çš„ç™»å½•ç»„ä»¶ æ³¨æ„ æ–°ç»„å»ºé‡Œé¢çš„show ä¹Ÿæ˜¯é€šè¿‡gettersæ˜ å°„åˆ°å½“å‰ç»„ä»¶çš„ computed: { ...mapGetters({ show: &#39;getLogregShow&#39; }) }, ä¸ºä»€ä¹ˆä¼šå¼¹å‡ºå‘¢ å¾ˆç®€å• æµç¨‹å¦‚ä¸‹è°ƒç”¨showLogreg(1)=========ã€‹æ‰¾åˆ°å¯¹åº”ä»“åº“çš„æ–¹æ³•ï¼Œæ‰¾åˆ°setLogregShow() ====&gt;ç”±äºè°ƒç”¨çš„æ—¶å€™ä¼ å…¥äº†1 é‚£ä¹ˆå°±ç›¸å½“äºæäº¤åˆ°mutationsä¸€ä¸ªæ–°çš„çŠ¶æ€å€¼, mutationsæ”¶åˆ°è¿™ä¸ªæäº¤ä¼šåšä¸€ä»¶äº‹æƒ… ä¼šæŠŠstateä¸‹é¢å¯¹åº”çš„æ•°æ®æ”¹å˜ ï¼ˆæŠŠshowå˜ä¸º1ï¼‰å½“showä¸º1çš„æ—¶å€™ è¿™ä¸ªç»„ä»¶å°±ä¼šè¢«æ¸²æŸ“é‚£ä¹ˆç”¨æˆ·å°±çœ‹åˆ°äº†ç™»å½•ç»„ä»¶","categories":[],"tags":[]}]}